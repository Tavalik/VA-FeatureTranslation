#Перевод шаблонов ограничений доступа БСП (временный).

\#Если\ &ОграничениеДоступаНаУровнеЗаписейУниверсально\ \#Тогда\n\#ДляОбъекта("")\n\#Иначе\nВариантыОтчетов\ ГДЕ\ (ВариантыОтчетов\.Пользовательский\ \=\ ЛОЖЬ\n\t\t\tИЛИ\ ВариантыОтчетов\.ТолькоДляАвтора\ \=\ ЛОЖЬ\n\t\t\tИЛИ\ ВариантыОтчетов\.Автор\ \=\ &АвторизованныйПользователь)\n\#КонецЕсли=\#IF &RecordLevelAccessRestrictionIsUniversal \#THEN\n\#ForObject("")\n\#ELSE\nReportsOptions WHERE (ReportsOptions.User \= FALSE\n\t\t\tOR ReportsOptions.AuthorOnly \= FALSE\n\t\t\tOR ReportsOptions.Author \= &AuthorizedUser)\n\#ENDIF
\#Если\ &ОграничениеДоступаНаУровнеЗаписейУниверсально\ \#Тогда\n\#ДляОбъекта("")\n\#Иначе\nВариантыОтчетов\ ГДЕ\ ВариантыОтчетов\.Автор\ \=\ &АвторизованныйПользователь\n\#КонецЕсли=\#IF &RecordLevelAccessRestrictionIsUniversal \#THEN\n\#ForObject("")\n\#ELSE\nReportsOptions WHERE ReportsOptions.Author \= &AuthorizedUser\n\#ENDIF
\#Если\ &ОграничениеДоступаНаУровнеЗаписейУниверсально\ \#Тогда\n\#ДляОбъекта("")\n\#Иначе\nГруппыДоступа\nГДЕ\n\tГруппыДоступа\.ЭтоГруппа\n\tИЛИ\ ИСТИНА\ В\n\t\t(ВЫБРАТЬ\ ПЕРВЫЕ\ 1\n\t\t\tИСТИНА\n\t\tИЗ\n\t\t\tРегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ СоставыГруппПользователей\.ГруппаПользователей\ \=\ ГруппыДоступа\.Ответственный\n\t\t\t\t\#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\n\t\t\t\t\tИ\ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &ТекущийПользователь\n\t\t\t\t\#Иначе\n\t\t\t\t\tИ\ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &ТекущийВнешнийПользователь\n\t\t\t\t\#КонецЕсли\n\t\t\ )\n\tИ\ Выбор\n\t\tКогда\ ГруппыДоступа\.Ссылка\ \ \=\ \ Значение(Справочник\.ГруппыДоступа\.Администраторы)\n\t\tТогда\ ГруппыДоступа\.Профиль\ \=\ \ Значение(Справочник\.ПрофилиГруппДоступа\.Администратор)\n\t\tИначе\ ГруппыДоступа\.Профиль\ <>\ Значение(Справочник\.ПрофилиГруппДоступа\.Администратор)\n\tКонец\n\#КонецЕсли=\#IF &RecordLevelAccessRestrictionIsUniversal \#THEN\n\#ForObject("")\n\#ELSE\nAccessGroups\nWHERE\n    AccessGroups.IsFolder\n    OR TRUE IN\n        (SELECT TOP 1\n            TRUE\n        FROM\n            InformationRegister.UserGroupCompositions AS UserGroupCompositions\n                WHERE\n                      UserGroupCompositions.UsersGroup \= AccessGroups.EmployeeResponsible\n                \#IF &CurrentExternalUser \= Value(Catalog.ExternalUser.EmptyRef) \#THEN\n                    AND UserGroupCompositions.User        \= &CurrentUser\n                \#ELSE\n                    AND UserGroupCompositions.User        \= &CurrentExternalUser\n                \#ENDIF\n         )\n    AND CASE\n        WHERE AccessGroups.Ref  \=  Value(Catalog.AccessGroups.Administrators)\n        THEN AccessGroups.Profile \=  Value(Catalog.AccessGroupProfiles.Administrator)\n        ELSE AccessGroups.Profile <> Value(Catalog.AccessGroupProfiles.Administrator)\n    END\n\#ENDIF
\#Если\ &ОграничениеДоступаНаУровнеЗаписейУниверсально\ \#Тогда\n\#ДляОбъекта("")\n\#Иначе\nПрофилиГруппДоступа\nГДЕ\n\ \ \ \ ПрофилиГруппДоступа\.ЭтоГруппа\n\ \ \ \ ИЛИ\ ИСТИНА\ В\n\ \ \ \ \ \ \ \ (ВЫБРАТЬ\ ПЕРВЫЕ\ 1\n\ \ \ \ \ \ \ \ \ \ \ \ ИСТИНА\n\ \ \ \ \ \ \ \ ИЗ\n\ \ \ \ \ \ \ \ \ \ \ \ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ Справочник\.ГруппыДоступа\ КАК\ ГруппыДоступа\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ГруппыДоступа\.Профиль\ \=\ ПрофилиГруппДоступа\.Ссылка\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ И\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ ГруппыДоступа\.Ответственный\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ И\ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &ТекущийПользователь\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#Иначе\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ И\ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &ТекущийВнешнийПользователь\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#КонецЕсли\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ И\ Выбор\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ ГруппыДоступа\.Ссылка\ \ \=\ \ Значение(Справочник\.ГруппыДоступа\.Администраторы)\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Тогда\ ГруппыДоступа\.Профиль\ \=\ \ Значение(Справочник\.ПрофилиГруппДоступа\.Администратор)\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Иначе\ ГруппыДоступа\.Профиль\ <>\ Значение(Справочник\.ПрофилиГруппДоступа\.Администратор)\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Конец\n\ \ \ \ \ \ \ \ \ )\n\#КонецЕсли=\#IF &RecordLevelAccessRestrictionIsUniversal \#THEN\n\#ForObject("")\n\#ELSE\nAccessGroupProfiles\nWHERE\n    AccessGroupProfiles.IsFolder\n    OR TRUE IN\n        (SELECT TOP 1\n            TRUE\n        FROM\n            InformationRegister.UserGroupCompositions AS UserGroupCompositions\n                INNER JOIN Catalog.AccessGroups AS AccessGroups\n                ON\n                      AccessGroups.Profile \= AccessGroupProfiles.Ref\n                    AND UserGroupCompositions.UsersGroup \= AccessGroups.EmployeeResponsible\n                \#IF &CurrentExternalUser \= VALUE(Catalog.ExternalUsers.EmptyRef) \#THEN\n                    AND UserGroupCompositions.User        \= &CurrentUser\n                \#ELSE\n                    AND UserGroupCompositions.User        \= &CurrentExternalUser\n                \#ENDIF\n                    AND CASE\n                        THEN AccessGroups.Ref  \=  VALUE(Catalog.AccessGroups.Administrators)\n                        THEN AccessGroups.Profile \=  VALUE(Catalog.AccessGroupProfiles.Administrator)\n                        ELSE AccessGroups.Profile <> VALUE(Catalog.AccessGroupProfiles.Administrator)\n                      END\n         )\n\#ENDIF
//\ ДляОбъекта(ПолеОбъекта\ \=\ "")\n//\ Шаблон\ используется\ для\ ограничения\ элементов\ справочников,\ документов\ и\n//\ других\ списков\ объектов\ по\ полю\ Ссылка,\ а\ также\ элементов\ зависимых\ списков\n//\ объектов\ и\ записей\ регистров\ через\ поле\ объекта-владельца\.\n//\n//\ Параметры\:\n//\ \ ПолеОбъекта\ -\ имя\ поля,\ содержащего\ ссылку\ на\ объект,\ от\ которого\ зависит\ элемент\ списка\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Значение\ ""\ (по\ умолчанию)\ то\ же,\ что\ имя\ поля\ "Ссылка"\.\n//\n\n\#Если\ &СпискиСОтключеннымОграничениемЧтения\ \=\ "Неопределено"\ \#Тогда\n\ \ //\ Информационная\ база\ заблокирована\ для\ обновления\.\n\ \ ГДЕ\ ЛОЖЬ\n\n\#ИначеЕсли\ Не\ СтрСодержит(&ВерсииШаблоновОграниченияДоступа,\ ",ДляОбъекта9,")\ \#Тогда\n\ \ Ошибка\:\ Требуется\ обновить\ шаблон\ на\ актуальную\ версию,\ поставляемую\ в\ роли\ ИзменениеУчастниковГруппДоступа\ по\ причине\:\ Используется\ устаревшая\ версия\ 9\ шаблона\ ограничения\ доступа\ ДляОбъекта\.\ Объект\:\ \#ИмяТекущейТаблицы,\ Право\:\ \#ИмяТекущегоПраваДоступа\.\n\n\#ИначеЕсли\ &СпискиСОтключеннымОграничениемЧтения\ \=\ "Все"\ \#Тогда\n\ \ //\ У\ пользователя\ отключены\ все\ виды\ доступа\ или\n\ \ //\ ограничение\ на\ уровне\ записей\ не\ используется\.\n\ \ ГДЕ\ ИСТИНА\n\n\#ИначеЕсли\ СтрСодержит(&СпискиСОтключеннымОграничениемЧтения,\ \#ИмяТекущейТаблицы\ +\ ";")\ \#Тогда\n\ \ //\ У\ пользователя\ отключено\ ограничение\ для\ текущей\ таблицы\.\n\ \ ГДЕ\ ИСТИНА\n\n\#ИначеЕсли\ СтрСодержит(&ВерсииШаблоновОграниченияДоступа,\ ",ТребуетсяПерезапуститьСеанс,")\ \#Тогда\n\ \ Ошибка\:\ Версия\ программы\ обновлена,\ требуется\ перезапустить\ сеанс\.\ Объект\:\ \#ИмяТекущейТаблицы,\ Право\:\ \#ИмяТекущегоПраваДоступа\.\n\n\#ИначеЕсли\ \#ИмяТекущегоПраваДоступа\ <>\ "Чтение"\ \#Тогда\n\ \ //\ Проверка\ прав\ Добавление,\ Изменение,\ Удаление\ выполняется\ ПередЗаписью\ /\ ПриЗаписи\.\n\ \ ГДЕ\ ИСТИНА\n\n\#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \#ИмяТекущейТаблицы\ +\ ";0")\ \#Тогда\n\ \ ГДЕ\ ЛОЖЬ\n\n\#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \#ИмяТекущейТаблицы\ +\ ";1")\ \#Тогда\n\ \ Ошибка\:\ Внешние\ пользователи\ отключены\.\n\n\#ИначеЕсли\ Не\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;")\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;")\ \#Тогда\n\n\ \ Ошибка\:\ Требуется\ актуализировать\ ограничение\ доступа\ по\ причине\:\ Не\ удалось\ определить\ вариант\ ограничения\ доступа\ в\ параметрах\ сеанса\ для\ шаблона\ ДляОбъекта\ со\ значением\ параметра\ "\#ПолеОбъекта"\.\ Объект\:\ \#ИмяТекущейТаблицы,\ Право\:\ \#ИмяТекущегоПраваДоступа\.\n\#Иначе\n\nТекущаяТаблица\ ГДЕ\ ИСТИНА\ В\n\ (\n\ \ ВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\ \ ИЗ\ РегистрСведений\.КлючиДоступаКОбъектам\ КАК\ КлючиДоступаКОбъектам\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;")\ \#Тогда\n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаНаборовГруппДоступа\ КАК\ КлючиДоступаНаборовГруппДоступа\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаНаборовГруппДоступа\.КлючДоступа\ \=\ КлючиДоступаКОбъектам\.КлючДоступаПользователей\n\ \ \ \ \ \ \#Иначе\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаНаборовГруппДоступа\.КлючДоступа\ \=\ КлючиДоступаКОбъектам\.КлючДоступаВнешнихПользователей\n\ \ \ \ \ \ \#КонецЕсли\n\ \ \ \ \ \ \ \ И\ КлючиДоступаНаборовГруппДоступа\.НаборГруппДоступа\ \=\ &РазрешенныйНаборГруппДоступа\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;*")\ \#Тогда\n\ \ \ \ \ \ \n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаНаборовГруппДоступа\ КАК\ КлючиДоступаРазрешенногоНабораГруппДоступа\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаРазрешенногоНабораГруппДоступа\.КлючДоступа\ \=\ КлючиДоступаКОбъектам\.КлючДоступаПользователей\n\ \ \ \ \ \ \#Иначе\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаРазрешенногоНабораГруппДоступа\.КлючДоступа\ \=\ КлючиДоступаКОбъектам\.КлючДоступаВнешнихПользователей\n\ \ \ \ \ \ \#КонецЕсли\n\ \ \ \ \ \ \ \ И\ КлючиДоступаРазрешенногоНабораГруппДоступа\.НаборГруппДоступа\ \=\ &РазрешенныйПустойНаборГруппДоступа\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;")\ \#Тогда\n\ \ \ \ \ \ \n\ \ \ \ \#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаПользователей\ КАК\ КлючиДоступаПользователей\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаПользователей\.КлючДоступа\ \=\ КлючиДоступаКОбъектам\.КлючДоступаПользователей\n\ \ \ \ \ \ \ \ И\ КлючиДоступаПользователей\.Пользователь\ \=\ &РазрешенныйПользователь\n\ \ \ \ \#Иначе\n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаВнешнихПользователей\ КАК\ КлючиДоступаПользователей\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаПользователей\.КлючДоступа\ \=\ КлючиДоступаКОбъектам\.КлючДоступаВнешнихПользователей\n\ \ \ \ \ \ \ \ И\ КлючиДоступаПользователей\.ВнешнийПользователь\ \=\ &РазрешенныйПользователь\n\ \ \ \ \#КонецЕсли\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;+")\ \#Тогда\n\ \ \ \ \ \ \n\ \ \ \ \#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаПользователей\ КАК\ КлючиДоступаНаборовГруппПользователей\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаНаборовГруппПользователей\.КлючДоступа\ \=\ КлючиДоступаКОбъектам\.КлючДоступаПользователей\n\ \ \ \ \ \ \ \ И\ КлючиДоступаНаборовГруппПользователей\.Пользователь\ \=\ &РазрешенныйНаборГруппПользователей\n\ \ \ \ \#Иначе\n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаВнешнихПользователей\ КАК\ КлючиДоступаНаборовГруппПользователей\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаНаборовГруппПользователей\.КлючДоступа\ \=\ КлючиДоступаКОбъектам\.КлючДоступаВнешнихПользователей\n\ \ \ \ \ \ \ \ И\ КлючиДоступаНаборовГруппПользователей\.ВнешнийПользователь\ \=\ &РазрешенныйНаборГруппПользователей\n\ \ \ \ \#КонецЕсли\n\ \ \#КонецЕсли\n\ \ ГДЕ\n\ \ \#Если\ "\#ПолеОбъекта"\ \ \=\ ""\n\ \ \ \ Или\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;;-")\n\ \ \ \ Или\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;*;-")\n\ \ \ \ Или\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;;-")\n\ \ \ \ Или\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;+;-")\ \#Тогда\n\ \ \ \ \ \ КлючиДоступаКОбъектам\.Объект\ \=\ ТекущаяТаблица\.Ссылка\n\ \ \#Иначе\n\ \ \ \ \ \ КлючиДоступаКОбъектам\.Объект\ \=\ ТекущаяТаблица\.\#ПолеОбъекта\n\ \ \#КонецЕсли\n\ \ \ \ И\ (\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;")\ \#Тогда\n\ \ \ \ \ \ \ \ \ \ НЕ\ КлючиДоступаНаборовГруппДоступа\.КлючДоступа\ ЕСТЬ\ NULL\n\ \ \#Иначе\n\ \ \ \ \ \ \ \ \ \ ЛОЖЬ\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;*")\ \#Тогда\n\ \ \ \ \ \ ИЛИ\ НЕ\ КлючиДоступаРазрешенногоНабораГруппДоступа\.КлючДоступа\ ЕСТЬ\ NULL\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;")\ \#Тогда\n\ \ \ \ \ \ ИЛИ\ НЕ\ КлючиДоступаПользователей\.КлючДоступа\ ЕСТЬ\ NULL\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;+")\ \#Тогда\n\ \ \ \ \ \ ИЛИ\ НЕ\ КлючиДоступаНаборовГруппПользователей\.КлючДоступа\ ЕСТЬ\ NULL\n\ \ \#КонецЕсли\n\ \ \ \ \ \ )\n\ )\n\n\ \#Если\ Не\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ \#ИмяТекущейТаблицы\ +\ "\:Пропустить;")\n\ \ \ И\ (\ \ \ \ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";УточнитьДляВсех;")\n\ \ \ \ \ \ Или\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ \#ИмяТекущейТаблицы\ +\ "\:Уточнить;")\ )\ \#Тогда\n\ \ \n\ \ \#Если\ Не\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:\#ПолеОбъекта;")\ \#Тогда\n\ \ И\ ИСТИНА\ В\ (ИСТИНА\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";31;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";30;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";29;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";28;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";27;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";26;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";25;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";24;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";23;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";22;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";21;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";20;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";19;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";18;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";17;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";16;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";15;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";14;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";13;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";12;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";11;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";10;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";09;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";08;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";07;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";06;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";05;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";04;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";03;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";02;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";01;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";00;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t)\n\ \ \#Иначе\n\ \ И\ ИСТИНА\ В\ (ИСТИНА\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";31^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";30^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";29^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";28^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";27^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";26^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";25^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";24^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";23^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";22^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";21^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";20^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";19^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";18^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";17^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";16^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";15^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";14^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";13^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";12^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";11^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";10^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";09^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";08^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";07^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";06^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";05^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";04^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";03^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";02^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";01^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";00^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t)\n\ \ \#КонецЕсли\n\ \#КонецЕсли\n\n\#КонецЕсли=\#If &ListsWithReadRestrictionDisabled \= "Undefined" \#Then\n  WHERE FALSE\n\n\#ElseIf Not StrContains(&AccessRestrictionTemplatesVersions, ",ForObject9,") \#Then\n  Error\: Required2 Refresh Template to1 actual version, supplied IN Roles EditAccessGroupMembers BY reason\: Used deprecated Version 9 template Restrictions access ForObject. Object\: \#CurrentTableName, Right\: \#CurrentAccessRightName.\n\n\#ElseIf &ListsWithReadRestrictionDisabled \= "All" \#Then\n  WHERE TRUE\n\n\#ElseIf StrContains(&ListsWithReadRestrictionDisabled, \#CurrentTableName + ";") \#Then\n  WHERE TRUE\n\n\#ElseIf StrContains(&AccessRestrictionTemplatesVersions, ",SessionRestartRequired1,") \#Then\n  Error\: Version Applications Updated1, Required2 Restart session. Object\: \#CurrentTableName, Right\: \#CurrentAccessRightName.\n\n\#ElseIf \#CurrentAccessRightName <> "Read" \#Then\n  WHERE TRUE\n\n\#ElseIf StrContains(&ListsWithAccessGroupsAccessKeysRestriction, \#CurrentTableName + ";0") \#Then\n  WHERE FALSE\n\n\#ElseIf StrContains(&ListsWithAccessGroupsAccessKeysRestriction, \#CurrentTableName + ";1") \#Then\n  Error\: External users are disabled.\n\n\#ElseIf Not StrContains(&ListsWithAccessGroupsAccessKeysRestriction,  \#CurrentTableName + "\:\#ObjectField;")\n         And Not StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;") \#Then\n\n  Error\: Required2 actualize Restriction access BY reason\: NOT ManagedTo define Variant Restrictions access IN parameters sessions FOR template ForObject with value parameter "\#ObjectField". Object\: \#CurrentTableName, Right\: \#CurrentAccessRightName.\n\#Else\n\nCurrentTable WHERE TRUE IN\n (\n  SELECT TOP 1 TRUE\n  FROM InformationRegister.AccessKeysForObjects AS AccessKeysForObjects\n  \#If StrContains(&ListsWithAccessGroupsAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;") \#Then\n      LEFT JOIN InformationRegister.AccessGroupSetsAccessKeys AS AccessGroupSetsAccessKeys\n      ON\n      \#If &CurrentExternalUser \= Value(Catalog.ExternalUsers.EmptyRef) \#Then\n          AccessGroupSetsAccessKeys.AccessKey \= AccessKeysForObjects.UsersAccessKey\n      \#Else\n          AccessGroupSetsAccessKeys.AccessKey \= AccessKeysForObjects.ExternalUsersAccessKey\n      \#EndIf\n        AND AccessGroupSetsAccessKeys.AccessGroupsSet \= &AllowedAccessGroupsSet\n  \#EndIf\n  \#If StrContains(&ListsWithAccessGroupsAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;*") \#Then\n      \n      LEFT JOIN InformationRegister.AccessGroupSetsAccessKeys AS AccessKeysAllowedSetAccessGroups\n      ON\n      \#If &CurrentExternalUser \= Value(Catalog.ExternalUsers.EmptyRef) \#Then\n          AccessKeysAllowedSetAccessGroups.AccessKey \= AccessKeysForObjects.UsersAccessKey\n      \#Else\n          AccessKeysAllowedSetAccessGroups.AccessKey \= AccessKeysForObjects.ExternalUsersAccessKey\n      \#EndIf\n        AND AccessKeysAllowedSetAccessGroups.AccessGroupsSet \= &AllowedBlankAccessGroupsSet\n  \#EndIf\n  \#If StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;") \#Then\n      \n    \#If &CurrentExternalUser \= Value(Catalog.ExternalUsers.EmptyRef) \#Then\n      LEFT JOIN InformationRegister.UsersAccessKeys AS UsersAccessKeys\n      ON\n          UsersAccessKeys.AccessKey \= AccessKeysForObjects.UsersAccessKey\n        AND UsersAccessKeys.User \= &AllowedUser\n    \#Else\n      LEFT JOIN InformationRegister.ExternalUsersAccessKeys AS UsersAccessKeys\n      ON\n          UsersAccessKeys.AccessKey \= AccessKeysForObjects.ExternalUsersAccessKey\n        AND UsersAccessKeys.ExternalUser \= &AllowedUser\n    \#EndIf\n  \#EndIf\n  \#If StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;+") \#Then\n      \n    \#If &CurrentExternalUser \= Value(Catalog.ExternalUsers.EmptyRef) \#Then\n      LEFT JOIN InformationRegister.UsersAccessKeys AS SetsAccessKeysAccessGroups\n      ON\n          SetsAccessKeysAccessGroups.AccessKey \= AccessKeysForObjects.UsersAccessKey\n        AND SetsAccessKeysAccessGroups.User \= &AllowedUserGroupsSet\n    \#Else\n      LEFT JOIN InformationRegister.ExternalUsersAccessKeys AS SetsAccessKeysAccessGroups\n      ON\n          SetsAccessKeysAccessGroups.AccessKey \= AccessKeysForObjects.ExternalUsersAccessKey\n        AND SetsAccessKeysAccessGroups.ExternalUser \= &AllowedUserGroupsSet\n    \#EndIf\n  \#EndIf\n  WHERE\n  \#If "\#ObjectField"  \= ""\n    Or StrContains(&ListsWithAccessGroupsAccessKeysRestriction,  \#CurrentTableName + "\:\#ObjectField;;-")\n    Or StrContains(&ListsWithAccessGroupsAccessKeysRestriction,  \#CurrentTableName + "\:\#ObjectField;*;-")\n    Or StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;;-")\n    Or StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;+;-") \#Then\n      AccessKeysForObjects.Object \= CurrentTable.Ref\n  \#Else\n      AccessKeysForObjects.Object \= CurrentTable.\#ObjectField\n  \#EndIf\n    AND (\n  \#If StrContains(&ListsWithAccessGroupsAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;") \#Then\n          NOT AccessGroupSetsAccessKeys.AccessKey IS NULL\n  \#Else\n          FALSE\n  \#EndIf\n  \#If StrContains(&ListsWithAccessGroupsAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;*") \#Then\n      OR NOT AccessKeysAllowedSetAccessGroups.AccessKey IS NULL\n  \#EndIf\n  \#If StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;") \#Then\n      OR NOT UsersAccessKeys.AccessKey IS NULL\n  \#EndIf\n  \#If StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;+") \#Then\n      OR NOT SetsAccessKeysAccessGroups.AccessKey IS NULL\n  \#EndIf\n      )\n )\n\n \#If Not StrContains(&CommonAccessRestrictionTemplateParameters, \#CurrentTableName + "\:Skip;")\n   And (    StrContains(&CommonAccessRestrictionTemplateParameters, ";ClarifyForAll;")\n      Or StrContains(&CommonAccessRestrictionTemplateParameters, \#CurrentTableName + "\:Specify;") ) \#Then\n  \n  \#If Not StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:\#ObjectField;") \#Then\n  AND TRUE IN (TRUE\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";31;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";30;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";29;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";28;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";27;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";26;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";25;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";24;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";23;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";22;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";21;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";20;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";19;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";18;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";17;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";16;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";15;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";14;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";13;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";12;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";11;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";10;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";09;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";08;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";07;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";06;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";05;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";04;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";03;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";02;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";01;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";00;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t)\n  \#Else\n  AND TRUE IN (TRUE\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";31^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";30^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";29^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";28^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";27^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";26^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";25^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";24^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";23^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";22^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";21^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";20^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";19^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";18^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";17^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";16^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";15^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";14^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";13^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";12^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";11^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";10^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";09^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";08^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";07^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";06^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";05^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";04^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";03^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";02^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";01^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";00^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t)\n  \#EndIf\n \#EndIf\n\n\#EndIf
//\ ДляРегистра(Регистр,\ Поле1,\ Поле2\ \=\ "",\ Поле3\ \=\ "",\ Поле4\ \=\ "",\ Поле5\ \=\ "")\n//\ Шаблон\ используется\ для\ ограничения\ групп\ записей\ регистров\.\n//\n//\ Параметры\:\n//\ \ Регистр\ -\ имя\ предопределенного\ элемента\ справочника\ Идентификаторы\ объектов\ метаданных\ или\ справочника\n//\ \ \ \ \ \ \ \ \ \ \ \ Идентификаторы\ объектов\ расширений\ в\ формате\:\ имя\ справочника\ с\ точкой\ и\ полное\ имя\ таблицы\n//\ \ \ \ \ \ \ \ \ \ \ \ без\ точки,\ например,\ ИдентификаторыОбъектовМетаданных\.РегистрНакопленияОстаткиНаСкладах;\n//\ \ \ \ \ \ \ \ \ \ -\ имя\ отдельного\ регистра\ ключей\ в\ формате\ КлючиДоступаКРегистру<ОстатокИмени>,\n//\ \ \ \ \ \ \ \ \ \ \ \ например,\ КлючиДоступаКРегиструОстаткиНаСкладах\.\n//\ \ Поле1\ \ \ -\ имя\ первого\ поля\ (измерения,\ ресурса,\ реквизита),\ которое\ будет\ соединяться\ с\ полем\ Поле1\n//\ \ \ \ \ \ \ \ \ \ \ \ регистра\ сведений\ КлючиДоступаКРегистр*\n//\ \ Поле2\ \ \ -\ аналогично\ предыдущему\ параметру,\ если\ используется\ в\ ограничении\ доступа\ к\ регистру\.\n//\ \ \.\.\.\n//\ \ Поле5\ \ \ -\ аналогично\ предыдущему\ параметру,\ если\ используется\ в\ ограничении\ доступа\ к\ регистру\.\n\n\#Если\ &СпискиСОтключеннымОграничениемЧтения\ \=\ "Неопределено"\ \#Тогда\n\ \ //\ Информационная\ база\ заблокирована\ для\ обновления\.\n\ \ ГДЕ\ ЛОЖЬ\n\n\#ИначеЕсли\ Не\ СтрСодержит(&ВерсииШаблоновОграниченияДоступа,\ ",ДляРегистра9,")\ \#Тогда\n\ \ Ошибка\:\ Требуется\ обновить\ шаблон\ на\ актуальную\ версию,\ поставляемую\ в\ роли\ ИзменениеУчастниковГруппДоступа\ по\ причине\:\ Используется\ устаревшая\ версия\ 9\ шаблона\ ограничения\ доступа\ ДляРегистра\.\ Объект\:\ \#ИмяТекущейТаблицы,\ Право\:\ \#ИмяТекущегоПраваДоступа\.\n\n\#ИначеЕсли\ &СпискиСОтключеннымОграничениемЧтения\ \=\ "Все"\ \#Тогда\n\ \ //\ У\ пользователя\ отключены\ все\ виды\ доступа\ или\n\ \ //\ ограничение\ на\ уровне\ записей\ не\ используется\.\n\ \ ГДЕ\ ИСТИНА\n\n\#ИначеЕсли\ СтрСодержит(&СпискиСОтключеннымОграничениемЧтения,\ \#ИмяТекущейТаблицы\ +\ ";")\ \#Тогда\n\ \ //\ У\ пользователя\ отключено\ ограничение\ для\ текущей\ таблицы\.\n\ \ ГДЕ\ ИСТИНА\n\n\#ИначеЕсли\ СтрСодержит(&ВерсииШаблоновОграниченияДоступа,\ ",ТребуетсяПерезапуститьСеанс,")\ \#Тогда\n\ \ Ошибка\:\ Версия\ программы\ обновлена,\ требуется\ перезапустить\ сеанс\.\ Объект\:\ \#ИмяТекущейТаблицы,\ Право\:\ \#ИмяТекущегоПраваДоступа\.\n\n\#ИначеЕсли\ \#ИмяТекущегоПраваДоступа\ <>\ "Чтение"\ \#Тогда\n\ \ //\ Проверка\ прав\ Добавление,\ Изменение,\ Удаление\ выполняется\ ПередЗаписью\ /\ ПриЗаписи\.\n\ \ ГДЕ\ ИСТИНА\n\n\#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \#ИмяТекущейТаблицы\ +\ ";0")\ \#Тогда\n\ \ ГДЕ\ ЛОЖЬ\n\n\#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \#ИмяТекущейТаблицы\ +\ ";1")\ \#Тогда\n\ \ Ошибка\:\ Внешние\ пользователи\ отключены\.\n\n\#ИначеЕсли\ Не\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;")\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;")\ \#Тогда\n\n\ \ Ошибка\:\ Требуется\ актуализировать\ ограничение\ доступа\ по\ причине\:\ Не\ удалось\ определить\ вариант\ ограничения\ доступа\ в\ параметрах\ сеанса\ для\ шаблона\ ДляРегистра\ со\ значениями\ параметров\ "\#Регистр",\ "\#Поле1",\ "\#Поле2",\ "\#Поле3",\ "\#Поле4",\ "\#Поле5"\.\ Объект\:\ \#ИмяТекущейТаблицы,\ Право\:\ \#ИмяТекущегоПраваДоступа\.\n\#Иначе\n\nТекущаяТаблица\ ГДЕ\ ИСТИНА\ В\n\ (\n\ \ ВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\#Если\ Не\ СтрСодержит("\#Регистр",\ "КлючиДоступаКРегистру")\ \#Тогда\n\ \ ИЗ\ РегистрСведений\.КлючиДоступаКРегистрам\ КАК\ КлючиДоступаКРегистрам\n\#Иначе\n\ \ ИЗ\ РегистрСведений\.\#Регистр\ КАК\ КлючиДоступаКРегистрам\n\#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;")\ \#Тогда\n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаНаборовГруппДоступа\ КАК\ КлючиДоступаНаборовГруппДоступа\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаНаборовГруппДоступа\.КлючДоступа\ \=\ КлючиДоступаКРегистрам\.КлючДоступа\n\ \ \ \ \ \ \ \ И\ КлючиДоступаНаборовГруппДоступа\.НаборГруппДоступа\ \=\ &РазрешенныйНаборГруппДоступа\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;*")\ \#Тогда\n\ \ \ \ \ \ \n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаНаборовГруппДоступа\ КАК\ КлючиДоступаРазрешенногоНабораГруппДоступа\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаРазрешенногоНабораГруппДоступа\.КлючДоступа\ \=\ КлючиДоступаКРегистрам\.КлючДоступа\n\ \ \ \ \ \ \ \ И\ КлючиДоступаРазрешенногоНабораГруппДоступа\.НаборГруппДоступа\ \=\ &РазрешенныйПустойНаборГруппДоступа\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;")\ \#Тогда\n\ \ \ \ \ \ \n\ \ \ \ \#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаПользователей\ КАК\ КлючиДоступаПользователей\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаПользователей\.КлючДоступа\ \=\ КлючиДоступаКРегистрам\.КлючДоступа\n\ \ \ \ \ \ \ \ И\ КлючиДоступаПользователей\.Пользователь\ \=\ &РазрешенныйПользователь\n\ \ \ \ \#Иначе\n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаВнешнихПользователей\ КАК\ КлючиДоступаПользователей\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаПользователей\.КлючДоступа\ \=\ КлючиДоступаКРегистрам\.КлючДоступа\n\ \ \ \ \ \ \ \ И\ КлючиДоступаПользователей\.ВнешнийПользователь\ \=\ &РазрешенныйПользователь\n\ \ \ \ \#КонецЕсли\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;+")\ \#Тогда\n\ \ \ \ \ \ \n\ \ \ \ \#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаПользователей\ КАК\ КлючиДоступаНаборовГруппПользователей\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаНаборовГруппПользователей\.КлючДоступа\ \=\ КлючиДоступаКРегистрам\.КлючДоступа\n\ \ \ \ \ \ \ \ И\ КлючиДоступаНаборовГруппПользователей\.Пользователь\ \=\ &РазрешенныйНаборГруппПользователей\n\ \ \ \ \#Иначе\n\ \ \ \ \ \ ЛЕВОЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.КлючиДоступаВнешнихПользователей\ КАК\ КлючиДоступаНаборовГруппПользователей\n\ \ \ \ \ \ ПО\n\ \ \ \ \ \ \ \ \ \ КлючиДоступаНаборовГруппПользователей\.КлючДоступа\ \=\ КлючиДоступаКРегистрам\.КлючДоступа\n\ \ \ \ \ \ \ \ И\ КлючиДоступаНаборовГруппПользователей\.ВнешнийПользователь\ \=\ &РазрешенныйНаборГруппПользователей\n\ \ \ \ \#КонецЕсли\n\ \ \#КонецЕсли\n\ \ ГДЕ\n\ \ \#Если\ Не\ СтрСодержит("\#Регистр",\ "КлючиДоступаКРегистру")\ \#Тогда\n\ \ \ \ \ \ КлючиДоступаКРегистрам\.Регистр\ \=\ Значение(Справочник\.\#Регистр)\n\ \ \#Иначе\n\ \ \ \ \ \ ИСТИНА\n\ \ \#КонецЕсли\n\ \ \ \ И\n\ \ (\n\ \ \ \ \ \ КлючиДоступаКРегистрам\.ВариантДоступа\ \=\n\ \ \ \ (\n\ \ \#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\ 0\ \#Иначе\ 1\ \#КонецЕсли\n\ \ \#Если\ Не\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Версия1\=0")\ \#Тогда\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле1\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле2\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле3\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле4\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле5\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия1Бит0\=1")\ \ \ \ \ \ \#Тогда\ +\ \ 64\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия1Бит1\=1")\ \ \ \ \ \ \#Тогда\ +\ 128\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия1Бит2\=1")\ \ \ \ \ \ \#Тогда\ +\ 256\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия1Бит3\=1")\ \ \ \ \ \ \#Тогда\ +\ 512\ \#КонецЕсли\n\ \ \#КонецЕсли\n\ \ \ \ )\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле1\=Поле1;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле1\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле1\=Поле2;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле2\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле1\=Поле3;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле3\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле1\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле1\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле2\=Поле2;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле2\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле2\=Поле3;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле3\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле2\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле2\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле3\=Поле3;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле3\ \=\ ТекущаяТаблица\.\#Поле3\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле3\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле3\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле3\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле3\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле4\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле4\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле4\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле4\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант1Поле5\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле5\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \n\ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2")\ \#Тогда\n\ \n\ \ ИЛИ\n\ \ \ \ \ \ КлючиДоступаКРегистрам\.ВариантДоступа\ \=\n\ \ \ \ (\n\ \ \#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\ 0\ \#Иначе\ 1\ \#КонецЕсли\n\ \ \#Если\ Не\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Версия2\=0")\ \#Тогда\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле1\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле2\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле3\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле4\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле5\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия2Бит0\=1")\ \ \ \ \ \ \#Тогда\ +\ \ 64\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия2Бит1\=1")\ \ \ \ \ \ \#Тогда\ +\ 128\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия2Бит2\=1")\ \ \ \ \ \ \#Тогда\ +\ 256\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия2Бит3\=1")\ \ \ \ \ \ \#Тогда\ +\ 512\ \#КонецЕсли\n\ \ \#КонецЕсли\n\ \ \ \ )\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле1\=Поле1;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле1\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле1\=Поле2;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле2\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле1\=Поле3;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле3\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле1\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле1\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле2\=Поле2;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле2\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле2\=Поле3;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле3\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле2\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле2\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле3\=Поле3;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле3\ \=\ ТекущаяТаблица\.\#Поле3\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле3\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле3\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле3\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле3\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле4\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле4\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле4\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле4\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант2Поле5\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле5\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \n\ \#КонецЕсли\n\ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3")\ \#Тогда\n\ \n\ \ ИЛИ\n\ \ \ \ \ \ КлючиДоступаКРегистрам\.ВариантДоступа\ \=\n\ \ \ \ (\n\ \ \#Если\ &ТекущийВнешнийПользователь\ \=\ Значение(Справочник\.ВнешниеПользователи\.ПустаяСсылка)\ \#Тогда\ 0\ \#Иначе\ 1\ \#КонецЕсли\n\ \ \#Если\ Не\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Версия3\=0")\ \#Тогда\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле1\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле2\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле3\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле4\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле5\=Поле")\ \#Тогда\ +\ \ \ 2\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия3Бит0\=1")\ \ \ \ \ \ \#Тогда\ +\ \ 64\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия3Бит1\=1")\ \ \ \ \ \ \#Тогда\ +\ 128\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия3Бит2\=1")\ \ \ \ \ \ \#Тогда\ +\ 256\ \#КонецЕсли\n\ \ \ \ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Версия3Бит3\=1")\ \ \ \ \ \ \#Тогда\ +\ 512\ \#КонецЕсли\n\ \ \#КонецЕсли\n\ \ \ \ )\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле1\=Поле1;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле1\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле1\=Поле2;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле2\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле1\=Поле3;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле3\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле1\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле1\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле1\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле2\=Поле2;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле2\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле2\=Поле3;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле3\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле2\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле2\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле2\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле3\=Поле3;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле3\ \=\ ТекущаяТаблица\.\#Поле3\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле3\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле3\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле3\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле3\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле4\=Поле4;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле4\ \=\ ТекущаяТаблица\.\#Поле4\n\ \ \#ИначеЕсли\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле4\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле4\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \ \n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемПоПолям,\ \#ИмяТекущейТаблицы\ +\ "\:Вариант3Поле5\=Поле5;")\ \#Тогда\n\ \ \ \ И\ КлючиДоступаКРегистрам\.Поле5\ \=\ ТекущаяТаблица\.\#Поле5\n\ \ \#КонецЕсли\n\ \n\ \#КонецЕсли\n\ \ )\n\ \ \ \ И\ (\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;")\ \#Тогда\n\ \ \ \ \ \ \ \ \ \ НЕ\ КлючиДоступаНаборовГруппДоступа\.КлючДоступа\ ЕСТЬ\ NULL\n\ \ \#Иначе\n\ \ \ \ \ \ \ \ \ \ ЛОЖЬ\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаГруппДоступа,\ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;*")\ \#Тогда\n\ \ \ \ \ \ ИЛИ\ НЕ\ КлючиДоступаРазрешенногоНабораГруппДоступа\.КлючДоступа\ ЕСТЬ\ NULL\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;")\ \#Тогда\n\ \ \ \ \ \ ИЛИ\ НЕ\ КлючиДоступаПользователей\.КлючДоступа\ ЕСТЬ\ NULL\n\ \ \#КонецЕсли\n\ \ \#Если\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;+")\ \#Тогда\n\ \ \ \ \ \ ИЛИ\ НЕ\ КлючиДоступаНаборовГруппПользователей\.КлючДоступа\ ЕСТЬ\ NULL\n\ \ \#КонецЕсли\n\ \ \ \ \ \ )\n\ )\n\n\ \#Если\ Не\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ \#ИмяТекущейТаблицы\ +\ "\:Пропустить;")\n\ \ \ И\ (\ \ \ \ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";УточнитьДляВсех;")\n\ \ \ \ \ \ Или\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ \#ИмяТекущейТаблицы\ +\ "\:Уточнить;")\ )\ \#Тогда\n\ \ \n\ \ \#Если\ Не\ СтрСодержит(&СпискиСОграничениемЧерезКлючиДоступаПользователей,\ \#ИмяТекущейТаблицы\ +\ "\:[\#Регистр]\:\#Поле1\:\#Поле2\:\#Поле3\:\#Поле4\:\#Поле5;")\ \#Тогда\n\ \ И\ ИСТИНА\ В\ (ИСТИНА\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";31;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";30;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";29;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";28;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";27;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";26;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";25;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";24;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";23;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";22;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";21;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";20;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";19;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";18;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";17;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";16;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";15;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";14;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";13;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";12;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";11;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";10;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";09;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";08;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";07;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";06;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";05;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";04;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";03;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";02;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";01;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";00;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t)\n\ \ \#Иначе\n\ \ И\ ИСТИНА\ В\ (ИСТИНА\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";31^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";30^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";29^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";28^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";27^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";26^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";25^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";24^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";23^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";22^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";21^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";20^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";19^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";18^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";17^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";16^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";15^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";14^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";13^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";12^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";11^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";10^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";09^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";08^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";07^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";06^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";05^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";04^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";03^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";02^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";01^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t\#Если\ СтрСодержит(&ОбщиеПараметрыШаблоновОграниченияДоступа,\ ";00^;")\ \#Тогда\ ,ИСТИНА\ \#Иначе\ ,ЛОЖЬ\ \#КонецЕсли\n\t)\n\ \ \#КонецЕсли\n\ \#КонецЕсли\n\n\#КонецЕсли=#If &ListsWithReadRestrictionDisabled \= "Undefined" \#Then\n  WHERE FALSE\n\n\#ElseIf Not StrContains(&AccessRestrictionTemplatesVersions, ",ForRegister9,") \#Then\n  Error\: Required2 Refresh Template to1 actual version, supplied IN Roles EditAccessGroupMembers BY reason\: Used deprecated Version 9 template Restrictions access ForRegister. Object\: \#CurrentTableName, Right\: \#CurrentAccessRightName.\n\n\#ElseIf &ListsWithReadRestrictionDisabled \= "All" \#Then\n  WHERE TRUE\n\n\#ElseIf StrContains(&ListsWithReadRestrictionDisabled, \#CurrentTableName + ";") \#Then\n  WHERE TRUE\n\n\#ElseIf StrContains(&AccessRestrictionTemplatesVersions, ",SessionRestartRequired1,") \#Then\n  Error\: Version Applications Updated1, Required2 Restart session. Object\: \#CurrentTableName, Right\: \#CurrentAccessRightName.\n\n\#ElseIf \#CurrentAccessRightName <> "Read" \#Then\n  WHERE TRUE\n\n\#ElseIf StrContains(&ListsWithAccessGroupsAccessKeysRestriction, \#CurrentTableName + ";0") \#Then\n  WHERE FALSE\n\n\#ElseIf StrContains(&ListsWithAccessGroupsAccessKeysRestriction, \#CurrentTableName + ";1") \#Then\n  Error\: External users are disabled.\n\n\#ElseIf Not StrContains(&ListsWithAccessGroupsAccessKeysRestriction,  \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;")\n         And Not StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;") \#Then\n\n  Error\: Required2 actual Restriction access BY reason\: NOT ManagedTo define Variant Restrictions access IN parameters sessions FOR template ForRegister with values parameters "\#Register", "\#Field1", "\#Field2", "\#Field3", "\#Field4", "\#Field5". Object\: \#CurrentTableName, Right\: \#CurrentAccessRightName.\n\#Else\n\nCurrentTable WHERE TRUE IN\n (\n  SELECT TOP 1 TRUE\n\#If Not StrContains("\#Register", "AccessKeysToRegister") \#Then\n  FROM InformationRegister.AccessKeysForRegisters AS AccessKeysForRegisters\n\#Else\n  FROM InformationRegister.\#Register AS AccessKeysForRegisters\n\#EndIf\n  \#If StrContains(&ListsWithAccessGroupsAccessKeysRestriction,  \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;") \#Then\n      LEFT JOIN InformationRegister.AccessGroupSetsAccessKeys AS AccessGroupSetsAccessKeys\n      ON\n          AccessGroupSetsAccessKeys.AccessKey \= AccessKeysForRegisters.AccessKey\n        AND AccessGroupSetsAccessKeys.AccessGroupsSet \= &AllowedAccessGroupsSet\n  \#EndIf\n  \#If StrContains(&ListsWithAccessGroupsAccessKeysRestriction,  \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;*") \#Then\n      \n      LEFT JOIN InformationRegister.AccessGroupSetsAccessKeys AS AccessKeysAllowedSetAccessGroups\n      ON\n          AccessKeysAllowedSetAccessGroups.AccessKey \= AccessKeysForRegisters.AccessKey\n        AND AccessKeysAllowedSetAccessGroups.AccessGroupsSet \= &AllowedBlankAccessGroupsSet\n  \#EndIf\n  \#If StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;") \#Then\n      \n    \#If &CurrentExternalUser \= Value(Catalog.ExternalUsers.EmptyRef) \#Then\n      LEFT JOIN InformationRegister.UsersAccessKeys AS UsersAccessKeys\n      ON\n          UsersAccessKeys.AccessKey \= AccessKeysForRegisters.AccessKey\n        AND UsersAccessKeys.User \= &AllowedUser\n    \#Else\n      LEFT JOIN InformationRegister.ExternalUsersAccessKeys AS UsersAccessKeys\n      ON\n          UsersAccessKeys.AccessKey \= AccessKeysForRegisters.AccessKey\n        AND UsersAccessKeys.ExternalUser \= &AllowedUser\n    \#EndIf\n  \#EndIf\n  \#If StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;+") \#Then\n      \n    \#If &CurrentExternalUser \= Value(Catalog.ExternalUsers.EmptyRef) \#Then\n      LEFT JOIN InformationRegister.UsersAccessKeys AS SetsAccessKeysAccessGroups\n      ON\n          SetsAccessKeysAccessGroups.AccessKey \= AccessKeysForRegisters.AccessKey\n        AND SetsAccessKeysAccessGroups.User \= &AllowedUserGroupsSet\n    \#Else\n      LEFT JOIN InformationRegister.ExternalUsersAccessKeys AS SetsAccessKeysAccessGroups\n      ON\n          SetsAccessKeysAccessGroups.AccessKey \= AccessKeysForRegisters.AccessKey\n        AND SetsAccessKeysAccessGroups.ExternalUser \= &AllowedUserGroupsSet\n    \#EndIf\n  \#EndIf\n  WHERE\n  \#If Not StrContains("\#Register", "AccessKeysToRegister") \#Then\n      AccessKeysForRegisters.Register \= VALUE(Catalog.\#Register)\n  \#Else\n      TRUE\n  \#EndIf\n    AND\n  (\n      AccessKeysForRegisters.AccessOption \=\n    (\n  \#If &CurrentExternalUser \= Value(Catalog.ExternalUsers.EmptyRef) \#Then 0 \#Else 1 \#EndIf\n  \#If Not StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Version1\=0") \#Then\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field1\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field2\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field3\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field4\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field5\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version1Bit0\=1")      \#Then +  64 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version1Bit1\=1")      \#Then + 128 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version1Bit2\=1")      \#Then + 256 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version1Bit3\=1")      \#Then + 512 \#EndIf\n  \#EndIf\n    )\n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field1\=Field1;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field1\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field1\=Field2;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field2\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field1\=Field3;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field3\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field1\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field1\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field2\=Field2;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field2\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field2\=Field3;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field3\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field2\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field2\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field3\=Field3;") \#Then\n    AND AccessKeysForRegisters.Field3 \= CurrentTable.\#Field3\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field3\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field3 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field3\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field3 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field4\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field4 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field4\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field4 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant1Field5\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field5 \= CurrentTable.\#Field5\n  \#EndIf\n \n \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2") \#Then\n \n  OR\n      AccessKeysForRegisters.AccessOption \=\n    (\n  \#If &CurrentExternalUser \= Value(Catalog.ExternalUsers.EmptyRef) \#Then 0 \#Else 1 \#EndIf\n  \#If Not StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Version2\=0") \#Then\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field1\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field2\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field3\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field4\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field5\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version2Bit0\=1")      \#Then +  64 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version2Bit1\=1")      \#Then + 128 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version2Bit2\=1")      \#Then + 256 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version2Bit3\=1")      \#Then + 512 \#EndIf\n  \#EndIf\n    )\n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field1\=Field1;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field1\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field1\=Field2;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field2\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field1\=Field3;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field3\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field1\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field1\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field2\=Field2;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field2\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field2\=Field3;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field3\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field2\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field2\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field3\=Field3;") \#Then\n    AND AccessKeysForRegisters.Field3 \= CurrentTable.\#Field3\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field3\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field3 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field3\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field3 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field4\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field4 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field4\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field4 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant2Field5\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field5 \= CurrentTable.\#Field5\n  \#EndIf\n \n \#EndIf\n \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3") \#Then\n \n  OR\n      AccessKeysForRegisters.AccessOption \=\n    (\n  \#If &CurrentExternalUser \= Value(Catalog.ExternalUsers.EmptyRef) \#Then 0 \#Else 1 \#EndIf\n  \#If Not StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Version3\=0") \#Then\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field1\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field2\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field3\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field4\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field5\=Field") \#Then +   2 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version3Bit0\=1")      \#Then +  64 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version3Bit1\=1")      \#Then + 128 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version3Bit2\=1")      \#Then + 256 \#EndIf\n     \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Version3Bit3\=1")      \#Then + 512 \#EndIf\n  \#EndIf\n    )\n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field1\=Field1;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field1\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field1\=Field2;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field2\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field1\=Field3;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field3\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field1\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field1\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field1 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field2\=Field2;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field2\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field2\=Field3;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field3\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field2\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field2\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field2 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field3\=Field3;") \#Then\n    AND AccessKeysForRegisters.Field3 \= CurrentTable.\#Field3\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field3\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field3 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field3\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field3 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field4\=Field4;") \#Then\n    AND AccessKeysForRegisters.Field4 \= CurrentTable.\#Field4\n  \#ElseIf StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field4\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field4 \= CurrentTable.\#Field5\n  \#EndIf\n  \n  \#If StrContains(&ListsWithRestrictionByFields, \#CurrentTableName + "\:Variant3Field5\=Field5;") \#Then\n    AND AccessKeysForRegisters.Field5 \= CurrentTable.\#Field5\n  \#EndIf\n \n \#EndIf\n  )\n    AND (\n  \#If StrContains(&ListsWithAccessGroupsAccessKeysRestriction, \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;") \#Then\n          NOT AccessGroupSetsAccessKeys.AccessKey IS NULL\n  \#Else\n          FALSE\n  \#EndIf\n  \#If StrContains(&ListsWithAccessGroupsAccessKeysRestriction, \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;*") \#Then\n      OR NOT AccessKeysAllowedSetAccessGroups.AccessKey IS NULL\n  \#EndIf\n  \#If StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;") \#Then\n      OR NOT UsersAccessKeys.AccessKey IS NULL\n  \#EndIf\n  \#If StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;+") \#Then\n      OR NOT SetsAccessKeysAccessGroups.AccessKey IS NULL\n  \#EndIf\n      )\n )\n\n \#If Not StrContains(&CommonAccessRestrictionTemplateParameters, \#CurrentTableName + "\:Skip;")\n   And (    StrContains(&CommonAccessRestrictionTemplateParameters, ";ClarifyForAll;")\n      Or StrContains(&CommonAccessRestrictionTemplateParameters, \#CurrentTableName + "\:Specify;") ) \#Then\n  \n  \#If Not StrContains(&ListsWithUsersAccessKeysRestriction, \#CurrentTableName + "\:[\#Register]\:\#Field1\:\#Field2\:\#Field3\:\#Field4\:\#Field5;") \#Then\n  AND TRUE IN (TRUE\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";31;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";30;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";29;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";28;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";27;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";26;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";25;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";24;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";23;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";22;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";21;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";20;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";19;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";18;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";17;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";16;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";15;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";14;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";13;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";12;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";11;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";10;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";09;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";08;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";07;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";06;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";05;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";04;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";03;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";02;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";01;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";00;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t)\n  \#Else\n  AND TRUE IN (TRUE\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";31^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";30^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";29^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";28^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";27^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";26^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";25^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";24^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";23^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";22^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";21^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";20^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";19^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";18^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";17^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";16^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";15^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";14^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";13^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";12^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";11^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";10^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";09^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";08^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";07^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";06^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";05^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";04^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";03^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";02^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";01^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t\#If StrContains(&CommonAccessRestrictionTemplateParameters, ";00^;") \#Then ,TRUE \#Else ,FALSE \#EndIf\n\t)\n  \#EndIf\n \#EndIf\n\n\#EndIf
//\ ПоЗначениям(Таблица,\ -,\ Модификатор,\ В1,П1,\ В2,П2,\ \.\.\.,\ \ В(n),\ П(n))\.\n//\ №\ параметра\:\ \ \ \ \ \ 1,\ 2,\ \ \ \ \ \ \ \ \ \ \ 3,\ \ 4,\ 5,\ \ 6,\ 7,\ \.\.\.,\ 2+n*2,3+n*2\.\n//\ Читается\ так\:\ "ограничение\ доступа\ по\ значениям"\.\n//\ Параметры\:\n//\ \ \ \ \ Таблица\ \ \ -\ Имя\ текущей\ таблицы,\ например\ "Документ\.ПоступлениеТоваровИУслуг"\.\n//\ \ \ \ \ Модификатор\ -\ изменяет\ шаблон\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1-й\ модификатор\ -\ строка\ "НеОграничиватьДоступКГруппам"\ указывает\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ безусловно\ выбирать\ группы\ иерархического\ справочника\.\ \n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Других\ модификаторов\ в\ этой\ версии\ шаблона\ не\ предусмотрено\.\n//\ \ \ \ \ В(n)\ \ \ \ \ \ -\ Вид\ доступа\ -\ имя\ вида\ доступа,\ например,\ "Организации"\.\ Для\ полей\ составного\ типа,\ с\ целью\ повышения\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ производительности,\ лучше\ указать\ несколько\ имен,\ например,\ "Организации,ГруппыФизическихЛиц",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ чем\ использовать\ несколько\ блоков\ параметров,\ с\ одним\ и\ тем\ же\ именем\ поля\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Специальные\ виды\ доступа\ "Условие",\ "НастройкиПрав",\ "ПравоЧтения",\ "ПравоИзменения",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "ПравоЧтенияПоИдентификатору",\ "ПравоИзмененияПоИдентификатору"\ можно\ использовать\ только\ отдельно\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ В(n)\ \=\ "Условие"\ (или\ ""),\ тогда\ П(n)\ содержит\ строку\ условия\ на\ языке\ запросов,\ например\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "Т\.Автор\ \=\ &АвторизованныйПользователь",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "ТИПЗНАЧЕНИЯ(Т\.Владелец)\ \=\ ТИП(Справочник\.Организации)",\ где\ Т\ -\ псевдоним\ текущей\ таблицы\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ В(n)\ \=\ "ПравоЧтения"\ Или\ "ПравоИзменения",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ выполняется\ проверка\ наличия\ права\ на\ таблицу\ значения\ Т\.П(n)\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ В(n)\ \=\ "ПравоЧтенияПоИдентификатору"\ или\ "ПравоИзмененияПоИдентификатору",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ выполняется\ проверка\ наличия\ права\ на\ таблицу\ по\ идентификатору\ в\ значении\ Т\.П(n)\.\n//\ \ \ \ \ П(n)\ \ \ \ \ \ -\ Поле\ проверяемого\ значения,\ кроме\ случая\ В(n)\ \=\ "Условие"\ (или\ "")\.\n//\ \ Примечение\:\ максимальное\ количество\ одновременно\ проверяемых\ значений\ полей\ можно\ увеличить,\ изменив\ шаблон,\ но\n//\ необходимо\ будет\ указывать\ все\ параметры\ шаблона,\ т\.е\.\ указывать\ пустые\ строки,\ когда\ количество\ полей\ меньше\ максимального\.\n//\ \ Шаблон\ имеет\ структуру\:\n//\ \ \ \ \ <Общая\ часть\ условий>\ <Условие\ по\ группе\ параметров\ 1>\ И\ <Условие\ по\ группе\ параметров\ 2>\ И\ \.\.\.\ <Условие\ по\ группе\ параметров(n)>\n//\ \ Пример\:\n//\ \ \ \ \ \ ПоЗначениям("Документ\.ПоступлениеТоваровИУслуг",\ "",\ "",\n//\ \ \ \ \ \ "Организации","Организация",\n//\ \ \ \ \ \ "Поставщики","Контрагент",\ "","",\ \.\.\.)\n\n\#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \=\ ""\ \#Тогда\ //\ Информационная\ база\ заблокирована\ для\ обновления\.\n\ \ \ \ ГДЕ\ ЛОЖЬ\n\n\#ИначеЕсли\ Не\ СтрСодержит(&ВерсииШаблоновОграниченияДоступа,\ ",ПоЗначениям18,")\ \#Тогда\n\ \ \ \ Ошибка\:\ Требуется\ обновить\ шаблон\ на\ актуальную\ версию,\ поставляемую\ в\ роли\ ИзменениеУчастниковГруппДоступа\ по\ причине\:\ Используется\ устаревшая\ версия\ 18\ шаблона\ ограничения\ доступа\ ПоЗначениям\.\ Объект\:\ \#ИмяТекущейТаблицы,\ Право\:\ \#ИмяТекущегоПраваДоступа\.\n\n\#Иначе\n\n//\ Проверка\ правильности\ параметра\ Право\.\n\#Если\ Не\ ("\#Параметр(2)"\ \=\ "Чтение"\ \ \ \ Или\ "\#Параметр(2)"\ \=\ "Добавление"\ Или\n\ \ \ \ \ \ \ \ \ \ "\#Параметр(2)"\ \=\ "Изменение"\ Или\ "\#Параметр(2)"\ \=\ "Удаление"\ \ \ Или\ "\#Параметр(2)"\ \=\ "")\n\ \ \ \ \ \ Или\ \#ИмяТекущегоПраваДоступа\ <>\ "Чтение"\ И\ "\#Параметр(2)"\ \ \=\ "Чтение"\n\ \ \ \ \ \ Или\ \#ИмяТекущегоПраваДоступа\ \ \=\ "Чтение"\ И\ "\#Параметр(2)"\ <>\ "Чтение"\ И\ "\#Параметр(2)"\ <>\ ""\ \#Тогда\n\ \ \ \ //\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\ \ \ \ НеверноеПраво\:\ \#Параметр(2)\n\#КонецЕсли\n\n//\ Проверка\ правильности\ параметра\ ИмяТаблицы\.\n\#Если\ "\#Параметр(1)"\ <>\ \#ИмяТекущейТаблицы\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\tНеверноеИмяТекущейТаблицы\:\ "\#Параметр(1)"\n\#КонецЕсли\n\n//\ Проверка\ правильности\ параметра\ Модификатор\.\n\#Если\ Не\ ("\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам"\ Или\ "\#Параметр(3)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\tНеверныйМодификатор\:\ \#Параметр(3)\n\#КонецЕсли\n\n//\ Общая\ проверка\ использования\ ограничений\ доступа\ на\ уровне\ записей\ и\n//\ проверка\ использования\ хотя\ бы\ одного\ ограничения\ из\ указанных\ видов\ доступа\.\n\#Если\ Не\n\ \ \ \ \ (\ \ Истина\n\ \ \ \ \ \ И\ ("\#Параметр(4)"\ \=\ ""\ И\ "\#Параметр(5)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(4),"))\n\ \ \ \ \ \ И\ ("\#Параметр(6)"\ \=\ ""\ И\ "\#Параметр(7)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(6),"))\n\ \ \ \ \ \ И\ ("\#Параметр(8)"\ \=\ ""\ И\ "\#Параметр(9)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(8),"))\n\ \ \ \ \ \ И\ ("\#Параметр(10)"\ \=\ ""\ И\ "\#Параметр(11)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(10),"))\n\ \ \ \ \ \ И\ ("\#Параметр(12)"\ \=\ ""\ И\ "\#Параметр(13)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(12),"))\n\ \ \ \ \ \ И\ ("\#Параметр(14)"\ \=\ ""\ И\ "\#Параметр(15)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(14),"))\n\ \ \ \ \ \ И\ ("\#Параметр(16)"\ \=\ ""\ И\ "\#Параметр(17)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(16),"))\n\ \ \ \ \ \ И\ ("\#Параметр(18)"\ \=\ ""\ И\ "\#Параметр(19)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(18),"))\n\ \ \ \ \ \ И\ ("\#Параметр(20)"\ \=\ ""\ И\ "\#Параметр(21)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(20),"))\n\ \ \ \ \ \ И\ ("\#Параметр(22)"\ \=\ ""\ И\ "\#Параметр(23)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(22),"))\n\ \ \ \ \ \ И\ ("\#Параметр(24)"\ \=\ ""\ И\ "\#Параметр(25)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(24),"))\n\ \ \ \ \ \ И\ ("\#Параметр(26)"\ \=\ ""\ И\ "\#Параметр(27)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(26),"))\n\ \ \ \ \ \ И\ ("\#Параметр(28)"\ \=\ ""\ И\ "\#Параметр(29)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(28),"))\n\ \ \ \ \ \ И\ ("\#Параметр(30)"\ \=\ ""\ И\ "\#Параметр(31)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(30),"))\n\ \ \ \ \ \ И\ ("\#Параметр(32)"\ \=\ ""\ И\ "\#Параметр(33)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(32),"))\n\ \ \ \ \ \ И\ ("\#Параметр(34)"\ \=\ ""\ И\ "\#Параметр(35)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(34),"))\n\ \ \ \ \ )\ \#Тогда\n\nТ\ ГДЕ\ //\ Т\ -\ псевдоним\ текущей\ таблицы\ (выбран\ коротким,\ чтобы\ сократить\ количество\ символов\ в\ тексте\ параметра-условия\ на\ языке\ запросов)\.\n\nИСТИНА\ В\n(\t//\ Проверка\ права\ пользователя\ на\ текущую\ таблицу\ в\ целом\.\n\t//\ Права\ на\ таблицы\ формируются\ по\ составу\ ролей\ профиля\ группы\ доступа\.\n\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\tИЗ\n\t\#Если\ СтрСодержит(&ТаблицыРасширенийСОграничениемДоступа,\ "|\#Параметр(1);")\ \#Тогда\n\t\tСправочник\.ИдентификаторыОбъектовРасширений\ КАК\ СвойстваТекущейТаблицы\n\t\#Иначе\n\t\tСправочник\.ИдентификаторыОбъектовМетаданных\ КАК\ СвойстваТекущейТаблицы\n\t\#КонецЕсли\n\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ Справочник\.ГруппыДоступа\ КАК\ ГруппыДоступа\n\t\tПО\n\t\t\t\ \ СвойстваТекущейТаблицы\.ПолноеИмя\ \=\ "\#Параметр(1)"\n\t\t\tИ\ ИСТИНА\ В\n\t\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\n\t\t\t\t\tРегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТаблицыГруппДоступа\.Таблица\ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Изменение"\ \#Тогда\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ПравоИзменение\n\t\t\t\t\t\#ИначеЕсли\ \#ИмяТекущегоПраваДоступа\ \=\ "Добавление"\ \#Тогда\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ПравоДобавление\n\t\t\t\t\t\#КонецЕсли\n\t\t\t\ \ )\n\t\t\tИ\ ГруппыДоступа\.Ссылка\ В\n\t\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\n\t\t\t\t\tГруппыДоступаПользователи\.Ссылка\ КАК\ ГруппаДоступа\n\t\t\t\tИЗ\n\t\t\t\t\tСправочник\.ГруппыДоступа\.Пользователи\ КАК\ ГруппыДоступаПользователи\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\tПО\n\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ ГруппыДоступаПользователи\.Пользователь\n\t\t\t\ \ )\n\tГДЕ\n\n//\ Безусловная\ выборка\ групп\ в\ иерархическом\ объекте\ метаданных\ (если\ нужно)\.\n\#Если\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам"\ \#Тогда\n\tТ\.ЭтоГруппа\ ИЛИ\n\#КонецЕсли\n\n\ \ (\ //\ Поиск\ значений\ заданных\ полей\ в\ разрешенных\ значениях\ групп\ доступа\ (пользователей)\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 1\.\n\#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(4)"\ \=\ "Условие"\ Или\ "\#Параметр(4)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t(\ \#Параметр(5)\ )\n\#ИначеЕсли\ "\#Параметр(4)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(4)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \ Т\.\#Параметр(5)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(5))\n\t\t\#Если\ Не\ "\#Параметр(4)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(4)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(4)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(5)\n\t\t\#Если\ Не\ "\#Параметр(4)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(4)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(5)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(5)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(4),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(4)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(4)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(4)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(4),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(5),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(4),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(4),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(5)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(4),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(5)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(5)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(4)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(4)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(4)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(4)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(4),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(5)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(5)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(5))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(Т\.\#Параметр(5),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 2\.\n\#Если\ "\#Параметр(6)"\ \=\ ""\ И\ "\#Параметр(7)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(6)"\ \=\ "Условие"\ Или\ "\#Параметр(6)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(7)\ )\n\#ИначеЕсли\ "\#Параметр(6)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(6)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(7)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(7))\n\t\t\#Если\ Не\ "\#Параметр(6)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(6)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(6)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(7)\n\t\t\#Если\ Не\ "\#Параметр(6)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(6)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(7)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(7)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(6),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(6)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(6)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(6)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(6),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(7),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(6),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(6),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(7)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(6),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(7)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(7)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(6)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(6)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(6)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(6)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(6),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(7)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(7)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(7))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(7),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 3\.\n\#Если\ "\#Параметр(8)"\ \=\ ""\ И\ "\#Параметр(9)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(8)"\ \=\ "Условие"\ Или\ "\#Параметр(8)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(9)\ )\n\#ИначеЕсли\ "\#Параметр(8)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(8)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(9)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(9))\n\t\t\#Если\ Не\ "\#Параметр(8)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(8)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(8)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(9)\n\t\t\#Если\ Не\ "\#Параметр(8)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(8)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(9)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(9)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(8),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(8)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(8)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(8)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(8),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(9),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(8),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(8),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(9)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(8),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(9)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(9)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(8)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(8)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(8)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(8)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(8),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(9)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(9)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(9))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(9),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 4\.\n\#Если\ "\#Параметр(10)"\ \=\ ""\ И\ "\#Параметр(11)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(10)"\ \=\ "Условие"\ Или\ "\#Параметр(10)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(11)\ )\n\#ИначеЕсли\ "\#Параметр(10)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(10)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(11)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(11))\n\t\t\#Если\ Не\ "\#Параметр(10)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(10)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(10)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(11)\n\t\t\#Если\ Не\ "\#Параметр(10)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(10)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(11)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(11)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(10),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(10)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(10)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(10)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(10),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(11),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(10),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(10),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(11)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(10),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(11)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(11)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(10)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(10)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(10)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(10)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(10),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(11)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(11)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(11))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(11),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 5\.\n\#Если\ "\#Параметр(12)"\ \=\ ""\ И\ "\#Параметр(13)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(12)"\ \=\ "Условие"\ Или\ "\#Параметр(12)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(13)\ )\n\#ИначеЕсли\ "\#Параметр(12)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(12)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(13)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(13))\n\t\t\#Если\ Не\ "\#Параметр(12)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(12)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(12)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(13)\n\t\t\#Если\ Не\ "\#Параметр(12)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(12)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(13)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(13)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(12),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(12)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(12)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(12)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(12),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(13),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(12),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(12),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(13)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(12),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(13)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(13)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(12)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(12)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(12)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(12)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(12),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(13)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(13)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(13))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(13),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 6\.\n\#Если\ "\#Параметр(14)"\ \=\ ""\ И\ "\#Параметр(15)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(14)"\ \=\ "Условие"\ Или\ "\#Параметр(14)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(15)\ )\n\#ИначеЕсли\ "\#Параметр(14)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(14)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(15)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(15))\n\t\t\#Если\ Не\ "\#Параметр(14)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(14)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(14)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(15)\n\t\t\#Если\ Не\ "\#Параметр(14)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(14)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(15)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(15)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(14),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(14)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(14)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(14)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(14),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(15),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(14),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(14),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(15)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(14),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(15)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(15)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(14)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(14)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(14)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(14)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(14),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(15)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(15)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(15))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(15),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 7\.\n\#Если\ "\#Параметр(16)"\ \=\ ""\ И\ "\#Параметр(17)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(16)"\ \=\ "Условие"\ Или\ "\#Параметр(16)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(17)\ )\n\#ИначеЕсли\ "\#Параметр(16)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(16)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(17)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(17))\n\t\t\#Если\ Не\ "\#Параметр(16)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(16)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(16)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(17)\n\t\t\#Если\ Не\ "\#Параметр(16)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(16)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(17)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(17)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(16),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(16)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(16)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(16)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(16),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(17),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(16),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(16),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(17)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(16),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(17)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(17)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(16)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(16)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(16)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(16)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(16),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(17)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(17)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(17))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(17),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 8\.\n\#Если\ "\#Параметр(18)"\ \=\ ""\ И\ "\#Параметр(19)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(18)"\ \=\ "Условие"\ Или\ "\#Параметр(18)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(19)\ )\n\#ИначеЕсли\ "\#Параметр(18)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(18)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(19)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(19))\n\t\t\#Если\ Не\ "\#Параметр(18)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(18)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(18)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(19)\n\t\t\#Если\ Не\ "\#Параметр(18)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(18)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(19)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(19)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(18),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(18)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(18)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(18)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(18),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(19),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(18),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(18),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(19)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(18),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(19)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(19)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(18)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(18)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(18)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(18)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(18),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(19)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(19)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(19))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(19),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 9\.\n\#Если\ "\#Параметр(20)"\ \=\ ""\ И\ "\#Параметр(21)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(20)"\ \=\ "Условие"\ Или\ "\#Параметр(20)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(21)\ )\n\#ИначеЕсли\ "\#Параметр(20)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(20)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(21)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(21))\n\t\t\#Если\ Не\ "\#Параметр(20)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(20)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(20)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(21)\n\t\t\#Если\ Не\ "\#Параметр(20)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(20)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(21)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(21)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(20),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(20)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(20)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(20)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(20),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(21),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(20),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(20),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(21)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(20),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(21)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(21)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(20)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(20)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(20)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(20)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(20),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(21)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(21)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(21))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(21),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 10\.\n\#Если\ "\#Параметр(22)"\ \=\ ""\ И\ "\#Параметр(23)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(22)"\ \=\ "Условие"\ Или\ "\#Параметр(22)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(23)\ )\n\#ИначеЕсли\ "\#Параметр(22)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(22)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(23)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(23))\n\t\t\#Если\ Не\ "\#Параметр(22)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(22)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(22)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(23)\n\t\t\#Если\ Не\ "\#Параметр(22)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(22)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(23)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(23)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(22),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(22)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(22)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(22)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(22),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(23),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(22),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(22),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(23)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(22),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(23)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(23)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(22)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(22)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(22)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(22)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(22),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(23)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(23)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(23))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(23),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 11\.\n\#Если\ "\#Параметр(24)"\ \=\ ""\ И\ "\#Параметр(25)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(24)"\ \=\ "Условие"\ Или\ "\#Параметр(24)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(25)\ )\n\#ИначеЕсли\ "\#Параметр(24)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(24)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(25)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(25))\n\t\t\#Если\ Не\ "\#Параметр(24)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(24)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(24)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(25)\n\t\t\#Если\ Не\ "\#Параметр(24)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(24)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(25)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(25)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(24),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(24)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(24)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(24)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(24),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(25),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(24),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(24),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(25)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(24),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(25)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(25)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(24)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(24)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(24)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(24)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(24),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(25)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(25)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(25))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(25),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 12\.\n\#Если\ "\#Параметр(26)"\ \=\ ""\ И\ "\#Параметр(27)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(26)"\ \=\ "Условие"\ Или\ "\#Параметр(26)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(27)\ )\n\#ИначеЕсли\ "\#Параметр(26)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(26)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(27)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(27))\n\t\t\#Если\ Не\ "\#Параметр(26)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(26)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(26)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(27)\n\t\t\#Если\ Не\ "\#Параметр(26)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(26)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(27)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(27)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(26),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(26)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(26)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(26)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(26),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(27),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(26),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(26),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(27)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(26),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(27)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(27)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(26)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(26)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(26)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(26)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(26),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(27)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(27)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(27))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(27),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 13\.\n\#Если\ "\#Параметр(28)"\ \=\ ""\ И\ "\#Параметр(29)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(28)"\ \=\ "Условие"\ Или\ "\#Параметр(28)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(29)\ )\n\#ИначеЕсли\ "\#Параметр(28)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(28)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(29)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(29))\n\t\t\#Если\ Не\ "\#Параметр(28)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(28)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(28)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(29)\n\t\t\#Если\ Не\ "\#Параметр(28)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(28)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(29)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(29)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(28),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(28)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(28)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(28)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(28),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(29),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(28),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(28),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(29)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(28),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(29)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(29)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(28)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(28)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(28)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(28)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(28),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(29)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(29)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(29))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(29),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 14\.\n\#Если\ "\#Параметр(30)"\ \=\ ""\ И\ "\#Параметр(31)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(30)"\ \=\ "Условие"\ Или\ "\#Параметр(30)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(31)\ )\n\#ИначеЕсли\ "\#Параметр(30)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(30)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(31)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(31))\n\t\t\#Если\ Не\ "\#Параметр(30)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(30)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(30)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(31)\n\t\t\#Если\ Не\ "\#Параметр(30)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(30)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(31)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(31)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(30),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(30)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(30)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(30)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(30),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(31),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(30),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(30),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(31)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(30),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(31)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(31)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(30)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(30)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(30)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(30)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(30),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(31)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(31)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(31))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(31),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 15\.\n\#Если\ "\#Параметр(32)"\ \=\ ""\ И\ "\#Параметр(33)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(32)"\ \=\ "Условие"\ Или\ "\#Параметр(32)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(33)\ )\n\#ИначеЕсли\ "\#Параметр(32)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(32)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(33)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(33))\n\t\t\#Если\ Не\ "\#Параметр(32)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(32)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(32)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(33)\n\t\t\#Если\ Не\ "\#Параметр(32)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(32)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(33)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(33)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(32),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(32)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(32)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(32)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(32),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(33),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(32),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(32),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(33)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(32),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(33)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(33)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(32)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(32)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(32)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(32)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(32),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(33)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(33)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(33))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(33),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 16\.\n\#Если\ "\#Параметр(34)"\ \=\ ""\ И\ "\#Параметр(35)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(34)"\ \=\ "Условие"\ Или\ "\#Параметр(34)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\tИ\ (\ \#Параметр(35)\ )\n\#ИначеЕсли\ "\#Параметр(34)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(34)"\ \=\ "ПравоИзменения"\ \#Тогда\n\tИ\ Т\.\#Параметр(35)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(35))\n\t\t\#Если\ Не\ "\#Параметр(34)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(34)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(34)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ Т\.\#Параметр(35)\n\t\t\#Если\ Не\ "\#Параметр(34)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t//\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(34)"\ \=\ "НастройкиПрав"\ \#Тогда\n\tИ\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(35)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ Т\.\#Параметр(35)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(34),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(34)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(34)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(34)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(34),")\ \#Тогда\n\tИ\n\t\ (\n\t\t\tЕСТЬNULL(Т\.\#Параметр(35),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(34),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(34),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ Т\.\#Параметр(35)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(34),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.\#Параметр(35)\n\t\t\#ИначеЕсли\ "Т\.\#Параметр(35)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(34)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(34)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(34)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(34)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(34),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ Т\.\#Параметр(35)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ Т\.\#Параметр(35)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(Т\.\#Параметр(35))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tИ\ ЕСТЬNULL(Т\.\#Параметр(35),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\ \ )\n)\n\#КонецЕсли\n\n\#КонецЕсли\ //\ Информационная\ база\ заблокирована\ для\ обновления\.=Error\: template not supported "\#Parameter(1) \#Parameter(2) \#Parameter(3) \#Parameter(4) \#Parameter(5) \#Parameter(6) \#Parameter(7) \#Parameter(8) \#Parameter(9) \#Parameter(10) \#Parameter(11) \#Parameter(12) \#Parameter(13) \#Parameter(14) \#Parameter(15) \#Parameter(16) \#Parameter(17) \#Parameter(18) \#Parameter(19) \#Parameter(20) \#Parameter(21) \#Parameter(22) \#Parameter(23) \#Parameter(24) \#Parameter(25) \#Parameter(26) \#Parameter(27) \#Parameter(28) \#Parameter(29) \#Parameter(30) \#Parameter(31) \#Parameter(32) \#Parameter(33) \#Parameter(34) \#Parameter(35)"
//\ ПоЗначениямИНаборамРасширенный(Таблица,\ -,\ Модификатор,\ ПрисоединяемыеТаблицы,\ О,\ В1,П1,О1,\ В2,П2,О2,\.\.\.,\ В(n),\ П(n),\ О(n))\.\n//\ №\ параметра\:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1,\ 2,\ \ \ \ \ \ \ \ \ \ \ 3,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 4,\ 5,\ \ 6,\ 7,\ 8,\ \ 9,10,11,\.\.\.,3+n*3,4+n*3,5+n*3\.\n//\ Читается\ так\:\ "ограничение\ доступа\ по\ значениям\ и\ наборам\ расширенный"\.\n//\ Параметры\:\n//\ \ \ \ \ Таблица\ \ \ -\ Имя\ текущей\ таблицы,\ например\ "Документ\.ПоступлениеТоваровИУслуг"\.\n//\ \ \ \ \ Модификатор\ -\ изменяет\ шаблон\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1-й\ модификатор\ -\ строка\ "НеОграничиватьДоступКГруппам"\ указывает\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ безусловно\ выбирать\ группы\ иерархического\ справочника\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2-й\ модификатор\ -\ строка\ "РасширенноеИЛИ"\ указывает\ для\ ограничений,\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ например,\ "ПоОрганизациям\ или\ ПоУчетнымЗаписям"\ делать\ расширенную\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ проверку,\ при\ которой\ вариант\ настройки\ вида\ доступа\ в\ группах\ доступа\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "Все\ разрешены,\ без\ запрещенных"\ считается,\ как\ "Вид\ доступа\ не\ используется"\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Если\ этого\ модификатора\ нет,\ тогда\ результат\ проверки\ Истина,\ что\ приводит\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ к\ итоговому\ результату\ Истина,\ если\ "Все\ разрешены,\ без\ запрещенных"\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ хотя\ бы\ по\ одному\ из\ видов\ доступа\ (либо\ ПоОрганизациям,\ либо\ ПоУчетнымЗаписям)\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Модификатор\ имеет\ смысл\ только\ при\ проверке\ наборов\ значений\ доступа\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Можно\ использовать\ комбинации\ модификаторов\:\ "НеОграничиватьДоступКГруппам",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "РасширенноеИЛИ",\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Других\ модификаторов\ в\ этой\ версии\ шаблона\ не\ предусмотрено\.\n//\ \ \ \ \ ПрисоединяемыеТаблицы\ -\ текст\ присоедиения\ дополнительных\ таблиц\ на\ языке\ запросов,\ например,\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "ВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ Документ\.АвансовыйОтчет\.ОплатаПоставщикам\ КАК\ Т1\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ПО\ Т\.Ссылка\ \=\ Т1\.Ссылка"\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Присоединение\ позволяет\ указать\ поля\ таблицы\ ОплатаПоставщикам,\ как\ поля\ основной\ таблицы\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ для\ проверки\ их\ значений,\ как\ значений\ основной\ таблицы\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Следует\ помнить,\ что\ при\ размножении\ строк\ в\ результате\ соединения,\ достаточно\ чтобы\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ всего\ одна\ строка\ прошла\ условия\ проверки,\ т\.е\.\ результаты\ проверки\ строк\ объединяются\ по\ "ИЛИ"\.\n//\ \ \ \ \ О\ \ \ \ \ \ \ \ \ -\ Начальные\ скобки\ "("\.\n//\ \ \ \ \ В(n)\ \ \ \ \ \ -\ Вид\ доступа\ -\ имя\ вида\ доступа,\ например,\ "Организации"\.\ Для\ полей\ составного\ типа,\ с\ целью\ повышения\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ производительности,\ лучше\ указать\ несколько\ имен,\ например,\ "Организации,ГруппыФизическихЛиц",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ чем\ использовать\ несколько\ блоков\ параметров,\ с\ одним\ и\ тем\ же\ именем\ поля\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Специальные\ виды\ доступа\ "Объект",\ "Условие",\ "НастройкиПрав",\ "ПравоЧтения",\ "ПравоИзменения",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "ПравоЧтенияПоИдентификатору",\ "ПравоИзмененияПоИдентификатору"\ можно\ использовать\ только\ отдельно\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ В(n)\ \=\ "Условие"\ (или\ ""),\ Тогда\ П(n)\ содержит\ строку\ условия\ на\ языке\ запросов,\ например\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "Т\.Автор\ \=\ &АвторизованныйПользователь",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "ТИПЗНАЧЕНИЯ(Т\.Владелец)\ \=\ ТИП(Справочник\.Организации)",\ где\ Т\ -\ псевдоним\ текущей\ таблицы\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ В(n)\ \=\ "ПравоЧтения"\ Или\ "ПравоИзменения",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ выполняется\ проверка\ наличия\ права\ на\ таблицу\ значения\ Т\.П(n)\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ В(n)\ \=\ "ПравоЧтенияПоИдентификатору"\ или\ "ПравоИзмененияПоИдентификатору",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ выполняется\ проверка\ наличия\ права\ на\ таблицу\ по\ идентификатору\ в\ значении\ Т\.П(n)\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ В(n)\ \=\ "Объект"\ (или\ "\ "),\ то\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ когда\ есть\ запись\ зависимости\ прав\ в\ регистре\ сведений\ ЗависимостиПравДоступа\ тогда\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ выполняется\ проверка\ права\ чтения\ Т\.П(n)\ и\ наборов\ значений\ доступа\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ в\ регистре\ сведений\ НаборыЗначенийДоступа,\ считываемых\ по\ ссылке\ Т\.П(n)\ для\ права\ чтения;\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ иначе\ используется\ стандартное\ правило\:\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ когда\ Право\ \=\ "Чтение"\ тогда\ выполняется\ проверка\ права\ чтения\ Т\.П(n)\ и\ наборов\ значений\ доступа\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ в\ регистре\ сведений\ НаборыЗначенийДоступа,\ считываемых\ по\ ссылке\ Т\.П(n)\ для\ права\ чтения;\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ когда\ Право\ \=\ "Изменение"\ тогда\ выполняется\ проверка\ права\ изменения\ Т\.П(n)\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ и\ наборов\ значений\ доступа,\ считываемых\ по\ ссылке\ Т\.П(n)\ для\ права\ изменения\.\n//\ \ \ \ \ П(n)\ \ \ \ \ -\ Поле\ проверяемого\ значения\ с\ псевдонимом,\ например\ "Т\.Организация",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ кроме\ случая\ В(n)\ \=\ "Условие"\ (или\ "")\.\n//\ \ \ \ \ О(n)\ \ \ \ \ \ -\ Логические\ операции\ "И",\ "ИЛИ"\ в\ сочетании\ с\ скобками\ "(",\ ")"\.\n//\ \ Примечение\:\ максимальное\ количество\ одновременно\ проверяемых\ значений\ полей\ можно\ увеличить,\ изменив\ шаблон,\ но\n//\ необходимо\ будет\ указывать\ все\ параметры\ шаблона,\ т\.е\.\ указывать\ пустые\ строки,\ когда\ количество\ полей\ меньше\ максимального\.\n//\ \ Шаблон\ имеет\ структуру\:\n//\ \ \ \ \ <Соединение\ по\ таблице1>\ \ <Соединение\ по\ таблице2>\ \ \.\.\.\ <Соединение\ по\ таблице(m)>\n//\ \ \ \ \ <Общая\ часть\ условий>\ <Условие\ по\ группе\ параметров\ 1>\ И/ИЛИ\ <Условие\ по\ группе\ параметров\ 1>\ И/ИЛИ\ \.\.\.\ <Условие\ по\ группе\ параметров(n)>\n//\ \ Пример\:\n//\ \ \ \ \ \ ПоЗначениямИНаборамРасширенный("ЖурналДокументов\.СкладскиеДокументы",\ "",\ "",\n//\ \ \ \ \ \ "",\n//\ \ \ \ \ \ "",\n//\ \ \ \ \ \ "Объект","Т\.Ссылка","И",\n//\ \ \ \ \ \ "Объект","Т\.ОсновнойДокумент","",\ "","","",\ \.\.\.)\n\n\#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \=\ ""\ \#Тогда\ //\ Информационная\ база\ заблокирована\ для\ обновления\.\n\ \ \ \ ГДЕ\ ЛОЖЬ\n\n\#ИначеЕсли\ Не\ СтрСодержит(&ВерсииШаблоновОграниченияДоступа,\ ",ПоЗначениямИНаборамРасширенный18,")\ \#Тогда\n\ \ \ \ Ошибка\:\ Требуется\ обновить\ шаблон\ на\ актуальную\ версию,\ поставляемую\ в\ роли\ ИзменениеУчастниковГруппДоступа\ по\ причине\:\ Используется\ устаревшая\ версия\ 18\ шаблона\ ограничения\ доступа\ ПоЗначениямИНаборамРасширенный\.\ Объект\:\ \#ИмяТекущейТаблицы,\ Право\:\ \#ИмяТекущегоПраваДоступа\.\n\n\#Иначе\n\n//\ Проверка\ правильности\ параметра\ Право\.\n\#Если\ Не\ ("\#Параметр(2)"\ \=\ "Чтение"\ \ \ \ Или\ "\#Параметр(2)"\ \=\ "Добавление"\ Или\n\ \ \ \ \ \ \ \ \ \ "\#Параметр(2)"\ \=\ "Изменение"\ Или\ "\#Параметр(2)"\ \=\ "Удаление"\ \ \ Или\ "\#Параметр(2)"\ \=\ "")\n\ \ \ \ \ \ Или\ \#ИмяТекущегоПраваДоступа\ <>\ "Чтение"\ И\ "\#Параметр(2)"\ \ \=\ "Чтение"\n\ \ \ \ \ \ Или\ \#ИмяТекущегоПраваДоступа\ \ \=\ "Чтение"\ И\ "\#Параметр(2)"\ <>\ "Чтение"\ И\ "\#Параметр(2)"\ <>\ ""\ \#Тогда\n\ \ \ \ //\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\ \ \ \ НеверноеПраво\:\ \#Параметр(2)\n\#КонецЕсли\n\n//\ Проверка\ правильности\ параметра\ ИмяТаблицы\.\n\#Если\ "\#Параметр(1)"\ <>\ \#ИмяТекущейТаблицы\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\tНеверноеИмяТекущейТаблицы\:\ "\#Параметр(1)"\n\#КонецЕсли\n\n//\ Проверка\ правильности\ параметра\ Модификатор\.\n\#Если\ Не\ (\ \ \ \ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам"\n\ \ \ \ \ \ \ \ \ \ Или\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\n\ \ \ \ \ \ \ \ \ \ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\n\ \ \ \ \ \ \ \ \ \ Или\ "\#Параметр(3)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\tНеверныйМодификатор\:\ \#Параметр(3)\n\#КонецЕсли\n\n//\ Общая\ проверка\ использования\ ограничений\ доступа\ на\ уровне\ записей\ и\n//\ проверка\ использования\ хотя\ бы\ одного\ ограничения\ из\ указанных\ видов\ доступа\.\n\#Если\ Не\n\ \ \ \ \ (\ \ Истина\n\ \ \ \ \ \ И\ ("\#Параметр(6)"\ \=\ ""\ И\ "\#Параметр(7)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(6),"))\n\ \ \ \ \ \ И\ ("\#Параметр(9)"\ \=\ ""\ И\ "\#Параметр(10)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(9),"))\n\ \ \ \ \ \ И\ ("\#Параметр(12)"\ \=\ ""\ И\ "\#Параметр(13)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(12),"))\n\ \ \ \ \ \ И\ ("\#Параметр(15)"\ \=\ ""\ И\ "\#Параметр(16)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(15),"))\n\ \ \ \ \ \ И\ ("\#Параметр(18)"\ \=\ ""\ И\ "\#Параметр(19)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(18),"))\n\ \ \ \ \ \ И\ ("\#Параметр(21)"\ \=\ ""\ И\ "\#Параметр(22)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(21),"))\n\ \ \ \ \ \ И\ ("\#Параметр(24)"\ \=\ ""\ И\ "\#Параметр(25)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(24),"))\n\ \ \ \ \ \ И\ ("\#Параметр(27)"\ \=\ ""\ И\ "\#Параметр(28)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(27),"))\n\ \ \ \ \ \ И\ ("\#Параметр(30)"\ \=\ ""\ И\ "\#Параметр(31)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(30),"))\n\ \ \ \ \ \ И\ ("\#Параметр(33)"\ \=\ ""\ И\ "\#Параметр(34)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(33),"))\n\ \ \ \ \ \ И\ ("\#Параметр(36)"\ \=\ ""\ И\ "\#Параметр(37)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(36),"))\n\ \ \ \ \ \ И\ ("\#Параметр(39)"\ \=\ ""\ И\ "\#Параметр(40)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(39),"))\n\ \ \ \ \ \ И\ ("\#Параметр(42)"\ \=\ ""\ И\ "\#Параметр(43)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(42),"))\n\ \ \ \ \ \ И\ ("\#Параметр(45)"\ \=\ ""\ И\ "\#Параметр(46)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(45),"))\n\ \ \ \ \ \ И\ ("\#Параметр(48)"\ \=\ ""\ И\ "\#Параметр(49)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(48),"))\n\ \ \ \ \ \ И\ ("\#Параметр(51)"\ \=\ ""\ И\ "\#Параметр(52)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(51),"))\n\ \ \ \ \ )\ \#Тогда\n\nТ\ ИЗ\ Т\ //\ Т\ -\ псевдоним\ текущей\ таблицы\ (выбран\ коротким,\ чтобы\ сократить\ количество\ символов\ в\ тексте\ параметра-условия\ на\ языке\ запросов)\.\n\n//\ Присоединяемые\ таблицы\ к\ проверяемой\ строке\ текущей\ таблицы\ "Т"\.\n\#Параметр(4)\n\nГДЕ\n\nИСТИНА\ В\n(\t//\ Проверка\ права\ пользователя\ на\ текущую\ таблицу\ в\ целом\.\n\t//\ Права\ на\ таблицы\ формируются\ по\ составу\ ролей\ профиля\ группы\ доступа\.\n\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\tИЗ\n\t\#Если\ СтрСодержит(&ТаблицыРасширенийСОграничениемДоступа,\ "|\#Параметр(1);")\ \#Тогда\n\t\tСправочник\.ИдентификаторыОбъектовРасширений\ КАК\ СвойстваТекущейТаблицы\n\t\#Иначе\n\t\tСправочник\.ИдентификаторыОбъектовМетаданных\ КАК\ СвойстваТекущейТаблицы\n\t\#КонецЕсли\n\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ Справочник\.ГруппыДоступа\ КАК\ ГруппыДоступа\n\t\tПО\n\t\t\t\ \ СвойстваТекущейТаблицы\.ПолноеИмя\ \=\ "\#Параметр(1)"\n\t\t\tИ\ ИСТИНА\ В\n\t\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\n\t\t\t\t\tРегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТаблицыГруппДоступа\.Таблица\ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Изменение"\ \#Тогда\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ПравоИзменение\n\t\t\t\t\t\#ИначеЕсли\ \#ИмяТекущегоПраваДоступа\ \=\ "Добавление"\ \#Тогда\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ПравоДобавление\n\t\t\t\t\t\#КонецЕсли\n\t\t\t\ \ )\n\t\t\tИ\ ГруппыДоступа\.Ссылка\ В\n\t\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\n\t\t\t\t\tГруппыДоступаПользователи\.Ссылка\ КАК\ ГруппаДоступа\n\t\t\t\tИЗ\n\t\t\t\t\tСправочник\.ГруппыДоступа\.Пользователи\ КАК\ ГруппыДоступаПользователи\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\tПО\n\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ ГруппыДоступаПользователи\.Пользователь\n\t\t\t\ \ )\n\tГДЕ\n\n//\ Безусловная\ выборка\ групп\ в\ иерархическом\ объекте\ метаданных\ (если\ нужно)\.\n\#Если\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\tТ\.ЭтоГруппа\ ИЛИ\n\#КонецЕсли\n\n\ \ (\ //\ Поиск\ значений\ заданных\ полей\ в\ разрешенных\ значениях\ групп\ доступа\ (пользователей)\.\n\n\t\#Параметр(5)\ \ //\ [([(][(]\.\.\.]\ 0-n\ открывающихся\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 1\.\n\#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(6)"\ \=\ "Условие"\ Или\ "\#Параметр(6)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t(\ \#Параметр(7)\ )\n\#ИначеЕсли\ "\#Параметр(6)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(6)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \ \#Параметр(7)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(7))\n\t\t\#Если\ Не\ "\#Параметр(6)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(6)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(6)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(7)\n\t\t\#Если\ Не\ "\#Параметр(6)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(6)"\ \=\ "Объект"\ Или\ "\#Параметр(6)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(7))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(7))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(7))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(7))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(7)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(7)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(7)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(7))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(7)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(7)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(7))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(7)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(7)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(6)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(7)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(7)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(6),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(6)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(6)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(6)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(6),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(7),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(6),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(6),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(7)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(6),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(7)\n\t\t\#ИначеЕсли\ "\#Параметр(7)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(6)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(6)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(6)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(6)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(6),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(7)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(7)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(7))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(7),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(8)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 2\.\n\#Если\ "\#Параметр(9)"\ \=\ ""\ И\ "\#Параметр(10)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(9)"\ \=\ "Условие"\ Или\ "\#Параметр(9)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(10)\ )\n\#ИначеЕсли\ "\#Параметр(9)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(9)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(10)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(10))\n\t\t\#Если\ Не\ "\#Параметр(9)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(9)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(9)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(10)\n\t\t\#Если\ Не\ "\#Параметр(9)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(9)"\ \=\ "Объект"\ Или\ "\#Параметр(9)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(10))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(10))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(10))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(10))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(10)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(10)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(10)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(10))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(10)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(10)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(10))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(10)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(10)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(9)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(10)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(10)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(9),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(9)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(9)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(9)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(9),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(10),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(9),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(9),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(10)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(9),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(10)\n\t\t\#ИначеЕсли\ "\#Параметр(10)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(9)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(9)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(9)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(9)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(9),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(10)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(10)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(10))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(10),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(11)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 3\.\n\#Если\ "\#Параметр(12)"\ \=\ ""\ И\ "\#Параметр(13)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(12)"\ \=\ "Условие"\ Или\ "\#Параметр(12)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(13)\ )\n\#ИначеЕсли\ "\#Параметр(12)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(12)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(13)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(13))\n\t\t\#Если\ Не\ "\#Параметр(12)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(12)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(12)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(13)\n\t\t\#Если\ Не\ "\#Параметр(12)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(12)"\ \=\ "Объект"\ Или\ "\#Параметр(12)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(13))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(13))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(13))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(13))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(13)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(13)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(13)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(13))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(13)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(13)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(13))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(13)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(13)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(12)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(13)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(13)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(12),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(12)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(12)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(12)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(12),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(13),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(12),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(12),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(13)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(12),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(13)\n\t\t\#ИначеЕсли\ "\#Параметр(13)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(12)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(12)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(12)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(12)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(12),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(13)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(13)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(13))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(13),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(14)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 4\.\n\#Если\ "\#Параметр(15)"\ \=\ ""\ И\ "\#Параметр(16)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(15)"\ \=\ "Условие"\ Или\ "\#Параметр(15)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(16)\ )\n\#ИначеЕсли\ "\#Параметр(15)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(15)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(16)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(16))\n\t\t\#Если\ Не\ "\#Параметр(15)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(15)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(15)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(16)\n\t\t\#Если\ Не\ "\#Параметр(15)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(15)"\ \=\ "Объект"\ Или\ "\#Параметр(15)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(16))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(16))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(16))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(16))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(16)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(16)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(16)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(16))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(16)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(16)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(16))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(16)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(16)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(15)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(16)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(16)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(15),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(15)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(15)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(15)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(15),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(16),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(15),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(15),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(16)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(15),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(16)\n\t\t\#ИначеЕсли\ "\#Параметр(16)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(15)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(15)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(15)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(15)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(15),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(16)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(16)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(16))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(16),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(17)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 5\.\n\#Если\ "\#Параметр(18)"\ \=\ ""\ И\ "\#Параметр(19)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(18)"\ \=\ "Условие"\ Или\ "\#Параметр(18)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(19)\ )\n\#ИначеЕсли\ "\#Параметр(18)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(18)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(19)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(19))\n\t\t\#Если\ Не\ "\#Параметр(18)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(18)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(18)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(19)\n\t\t\#Если\ Не\ "\#Параметр(18)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(18)"\ \=\ "Объект"\ Или\ "\#Параметр(18)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(19))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(19))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(19))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(19))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(19)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(19)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(19)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(19))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(19)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(19)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(19))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(19)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(19)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(18)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(19)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(19)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(18),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(18)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(18)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(18)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(18),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(19),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(18),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(18),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(19)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(18),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(19)\n\t\t\#ИначеЕсли\ "\#Параметр(19)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(18)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(18)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(18)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(18)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(18),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(19)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(19)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(19))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(19),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(20)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 6\.\n\#Если\ "\#Параметр(21)"\ \=\ ""\ И\ "\#Параметр(22)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(21)"\ \=\ "Условие"\ Или\ "\#Параметр(21)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(22)\ )\n\#ИначеЕсли\ "\#Параметр(21)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(21)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(22)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(22))\n\t\t\#Если\ Не\ "\#Параметр(21)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(21)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(21)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(22)\n\t\t\#Если\ Не\ "\#Параметр(21)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(21)"\ \=\ "Объект"\ Или\ "\#Параметр(21)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(22))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(22))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(22))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(22))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(22)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(22)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(22)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(22))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(22)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(22)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(22))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(22)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(22)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(21)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(22)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(22)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(21),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(21)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(21)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(21)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(21),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(22),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(21),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(21),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(22)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(21),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(22)\n\t\t\#ИначеЕсли\ "\#Параметр(22)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(21)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(21)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(21)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(21)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(21),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(22)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(22)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(22))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(22),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(23)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 7\.\n\#Если\ "\#Параметр(24)"\ \=\ ""\ И\ "\#Параметр(25)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(24)"\ \=\ "Условие"\ Или\ "\#Параметр(24)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(25)\ )\n\#ИначеЕсли\ "\#Параметр(24)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(24)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(25)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(25))\n\t\t\#Если\ Не\ "\#Параметр(24)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(24)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(24)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(25)\n\t\t\#Если\ Не\ "\#Параметр(24)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(24)"\ \=\ "Объект"\ Или\ "\#Параметр(24)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(25))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(25))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(25))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(25))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(25)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(25)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(25)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(25))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(25)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(25)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(25))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(25)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(25)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(24)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(25)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(25)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(24),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(24)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(24)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(24)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(24),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(25),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(24),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(24),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(25)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(24),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(25)\n\t\t\#ИначеЕсли\ "\#Параметр(25)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(24)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(24)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(24)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(24)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(24),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(25)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(25)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(25))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(25),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(26)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 8\.\n\#Если\ "\#Параметр(27)"\ \=\ ""\ И\ "\#Параметр(28)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(27)"\ \=\ "Условие"\ Или\ "\#Параметр(27)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(28)\ )\n\#ИначеЕсли\ "\#Параметр(27)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(27)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(28)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(28))\n\t\t\#Если\ Не\ "\#Параметр(27)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(27)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(27)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(28)\n\t\t\#Если\ Не\ "\#Параметр(27)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(27)"\ \=\ "Объект"\ Или\ "\#Параметр(27)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(28))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(28))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(28))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(28))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(28)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(28)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(28)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(28))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(28)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(28)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(28))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(28)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(28)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(27)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(28)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(28)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(27),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(27)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(27)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(27)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(27),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(28),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(27),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(27),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(28)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(27),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(28)\n\t\t\#ИначеЕсли\ "\#Параметр(28)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(27)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(27)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(27)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(27)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(27),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(28)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(28)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(28))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(28),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(29)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 9\.\n\#Если\ "\#Параметр(30)"\ \=\ ""\ И\ "\#Параметр(31)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(30)"\ \=\ "Условие"\ Или\ "\#Параметр(30)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(31)\ )\n\#ИначеЕсли\ "\#Параметр(30)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(30)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(31)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(31))\n\t\t\#Если\ Не\ "\#Параметр(30)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(30)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(30)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(31)\n\t\t\#Если\ Не\ "\#Параметр(30)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(30)"\ \=\ "Объект"\ Или\ "\#Параметр(30)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(31))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(31))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(31))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(31))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(31)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(31)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(31)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(31))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(31)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(31)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(31))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(31)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(31)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(30)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(31)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(31)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(30),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(30)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(30)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(30)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(30),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(31),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(30),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(30),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(31)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(30),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(31)\n\t\t\#ИначеЕсли\ "\#Параметр(31)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(30)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(30)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(30)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(30)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(30),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(31)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(31)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(31))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(31),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(32)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 10\.\n\#Если\ "\#Параметр(33)"\ \=\ ""\ И\ "\#Параметр(34)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(33)"\ \=\ "Условие"\ Или\ "\#Параметр(33)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(34)\ )\n\#ИначеЕсли\ "\#Параметр(33)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(33)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(34)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(34))\n\t\t\#Если\ Не\ "\#Параметр(33)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(33)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(33)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(34)\n\t\t\#Если\ Не\ "\#Параметр(33)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(33)"\ \=\ "Объект"\ Или\ "\#Параметр(33)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(34))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(34))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(34))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(34))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(34)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(34)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(34)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(34))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(34)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(34)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(34))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(34)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(34)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(33)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(34)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(34)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(33),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(33)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(33)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(33)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(33),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(34),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(33),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(33),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(34)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(33),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(34)\n\t\t\#ИначеЕсли\ "\#Параметр(34)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(33)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(33)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(33)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(33)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(33),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(34)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(34)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(34))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(34),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(35)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 11\.\n\#Если\ "\#Параметр(36)"\ \=\ ""\ И\ "\#Параметр(37)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(36)"\ \=\ "Условие"\ Или\ "\#Параметр(36)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(37)\ )\n\#ИначеЕсли\ "\#Параметр(36)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(36)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(37)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(37))\n\t\t\#Если\ Не\ "\#Параметр(36)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(36)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(36)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(37)\n\t\t\#Если\ Не\ "\#Параметр(36)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(36)"\ \=\ "Объект"\ Или\ "\#Параметр(36)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(37))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(37))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(37))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(37))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(37)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(37)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(37)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(37))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(37)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(37)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(37))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(37)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(37)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(36)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(37)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(37)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(36),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(36)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(36)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(36)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(36),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(37),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(36),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(36),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(37)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(36),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(37)\n\t\t\#ИначеЕсли\ "\#Параметр(37)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(36)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(36)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(36)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(36)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(36),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(37)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(37)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(37))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(37),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(38)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 12\.\n\#Если\ "\#Параметр(39)"\ \=\ ""\ И\ "\#Параметр(40)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(39)"\ \=\ "Условие"\ Или\ "\#Параметр(39)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(40)\ )\n\#ИначеЕсли\ "\#Параметр(39)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(39)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(40)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(40))\n\t\t\#Если\ Не\ "\#Параметр(39)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(39)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(39)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(40)\n\t\t\#Если\ Не\ "\#Параметр(39)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(39)"\ \=\ "Объект"\ Или\ "\#Параметр(39)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(40))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(40))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(40))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(40))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(40)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(40)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(40)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(40))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(40)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(40)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(40))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(40)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(40)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(39)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(40)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(40)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(39),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(39)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(39)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(39)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(39),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(40),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(39),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(39),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(40)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(39),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(40)\n\t\t\#ИначеЕсли\ "\#Параметр(40)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(39)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(39)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(39)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(39)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(39),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(40)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(40)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(40))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(40),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(41)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 13\.\n\#Если\ "\#Параметр(42)"\ \=\ ""\ И\ "\#Параметр(43)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(42)"\ \=\ "Условие"\ Или\ "\#Параметр(42)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(43)\ )\n\#ИначеЕсли\ "\#Параметр(42)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(42)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(43)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(43))\n\t\t\#Если\ Не\ "\#Параметр(42)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(42)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(42)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(43)\n\t\t\#Если\ Не\ "\#Параметр(42)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(42)"\ \=\ "Объект"\ Или\ "\#Параметр(42)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(43))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(43))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(43))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(43))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(43)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(43)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(43)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(43))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(43)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(43)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(43))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(43)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(43)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(42)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(43)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(43)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(42),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(42)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(42)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(42)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(42),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(43),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(42),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(42),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(43)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(42),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(43)\n\t\t\#ИначеЕсли\ "\#Параметр(43)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(42)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(42)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(42)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(42)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(42),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(43)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(43)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(43))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(43),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(44)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 14\.\n\#Если\ "\#Параметр(45)"\ \=\ ""\ И\ "\#Параметр(46)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(45)"\ \=\ "Условие"\ Или\ "\#Параметр(45)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(46)\ )\n\#ИначеЕсли\ "\#Параметр(45)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(45)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(46)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(46))\n\t\t\#Если\ Не\ "\#Параметр(45)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(45)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(45)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(46)\n\t\t\#Если\ Не\ "\#Параметр(45)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(45)"\ \=\ "Объект"\ Или\ "\#Параметр(45)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(46))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(46))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(46))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(46))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(46)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(46)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(46)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(46))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(46)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(46)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(46))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(46)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(46)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(45)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(46)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(46)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(45),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(45)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(45)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(45)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(45),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(46),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(45),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(45),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(46)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(45),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(46)\n\t\t\#ИначеЕсли\ "\#Параметр(46)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(45)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(45)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(45)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(45)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(45),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(46)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(46)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(46))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(46),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(47)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 15\.\n\#Если\ "\#Параметр(48)"\ \=\ ""\ И\ "\#Параметр(49)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(48)"\ \=\ "Условие"\ Или\ "\#Параметр(48)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(49)\ )\n\#ИначеЕсли\ "\#Параметр(48)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(48)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(49)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(49))\n\t\t\#Если\ Не\ "\#Параметр(48)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(48)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(48)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(49)\n\t\t\#Если\ Не\ "\#Параметр(48)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(48)"\ \=\ "Объект"\ Или\ "\#Параметр(48)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(49))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(49))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(49))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(49))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(49)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(49)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(49)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(49))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(49)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(49)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(49))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(49)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(49)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(48)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(49)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(49)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(48),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(48)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(48)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(48)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(48),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(49),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(48),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(48),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(49)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(48),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(49)\n\t\t\#ИначеЕсли\ "\#Параметр(49)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(48)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(48)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(48)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(48)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(48),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(49)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(49)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(49))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(49),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(50)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 16\.\n\#Если\ "\#Параметр(51)"\ \=\ ""\ И\ "\#Параметр(52)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(51)"\ \=\ "Условие"\ Или\ "\#Параметр(51)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(52)\ )\n\#ИначеЕсли\ "\#Параметр(51)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(51)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(52)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(52))\n\t\t\#Если\ Не\ "\#Параметр(51)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(51)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(51)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(52)\n\t\t\#Если\ Не\ "\#Параметр(51)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(51)"\ \=\ "Объект"\ Или\ "\#Параметр(51)"\ \=\ "\ "\ \#Тогда\n\t(\n\t\t//\ Проверка\ права\ объекта\ ведущей\ таблицы\ (зависимость\ по\ правам)\n\t\t(\n\t\t\tИСТИНА\ В\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваОбъекта\n\t\t\tГДЕ\n\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПраваОбъекта\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(52))\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Чтение\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\#Иначе\n\t\t\t\t//\ Проверка\ ведущего\ права\ для\ права\ Изменение\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ НЕ\n\t\t\t\t(\t\ \ ТаблицыГруппДоступаПроверкаПраваОбъекта\.ПравоИзменение\ \=\ ЛОЖЬ\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(52))\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t)\n\t\t)\n\ \ \#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\t\t//\ Проверка\ ограничения\ права\ объекта\ ведущей\ таблицы\n\t\tИ\ \n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tВЫБОР\ КОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(52))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\t\tИЛИ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ Идентификаторы\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(Идентификаторы\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(52))\n\t\t\t\t\t\tИ\ Идентификаторы\.ЗначениеПустойСсылки\ В\ (&ТипыВладельцевНастроекПрав)\n\t\t\t\t)\n\t\tТОГДА\n\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(52)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(52)\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\ \ \#Иначе\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t)\n\t\tИНАЧЕ\n\t\#КонецЕсли\n\t\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\tНЕ\n\t\t\ (\n\t\t\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(52)\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\t\#Иначе\n\t\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(52))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\t\ \ КОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\tИ\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(52)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\ \ )\ И\ НЕ\n\t\#Иначе\n\t\t\ (\n\t\#КонецЕсли\n\t\t\ \ ИСТИНА\ В\n\t\t\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ \#Параметр(52)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tИ\ НомераНаборов\.Чтение\ \=\ ИСТИНА\n\t\t\t\#Иначе\n\t\t\t\t//\ Право\ Изменение\ может\ зависеть\ от\ ведущих\ прав\ Чтение,\ Изменение\n\t\t\t\tИ\ ВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗависимостиПравДоступа\ КАК\ ЗависимостиПравДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ЗависимостиПравДоступа\.ПодчиненнаяТаблица\ \ \ \ \ \ \ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗависимостиПравДоступа\.ТипВедущейТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(52))\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ НомераНаборов\.Чтение\n\t\t\t\t\tИНАЧЕ\ НомераНаборов\.Изменение\n\t\t\t\t\ \ КОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\t\t\t\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\t\t\t\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(52)\n\t\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\tИ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\ \ НЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ НаборыЗначений\.Объект\ \ \ \ \ \ \=\ \#Параметр(52)\n\t\t\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\t\t\tИ\ НЕ\n\t\t\t\tВЫБОР\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\ \ \#Если\ НЕ\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\ \ \#КонецЕсли\n\t\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\t\#Иначе\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tВЫБОР\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОГДА\n\t\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\n\t\t\t\t\t\tИСТИНА\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tИНАЧЕ\n\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\t\=\n\t\t\t\t\t\tВЫБОР\n\t\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\#КонецЕсли\n\t\t\t\#КонецЕсли\n\t\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t\t)\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\t\t(\n\t\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\#Иначе\n\t\t\t\tИНАЧЕ\n\t\t\t\t\tЛОЖЬ\n\t\t\t\#КонецЕсли\n\t\t\t\tКОНЕЦ\n\t\t\t\t)\ //\ НЕ\ ЛОЖЬ\ В\n\t\t\ \ )\n\t\t\ )\n\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\tКОНЕЦ\n\t\#КонецЕсли\n\ \ \#КонецЕсли\n\t)\n\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(51)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(52)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(52)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(51),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(51)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(51)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(51)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(51),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(52),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(51),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(51),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(52)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(51),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(52)\n\t\t\#ИначеЕсли\ "\#Параметр(52)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(51)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(51)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(51)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(51)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(51),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(52)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(52)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(52))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\n\#Иначе\n\tЕСТЬNULL(\#Параметр(52),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(53)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n\ \ )\n)\n\#КонецЕсли\n\n\#КонецЕсли\ //\ Информационная\ база\ заблокирована\ для\ обновления\.=Error\: template not supported "\#Parameter(1) \#Parameter(2) \#Parameter(3) \#Parameter(4) \#Parameter(5) \#Parameter(6) \#Parameter(7) \#Parameter(8) \#Parameter(9) \#Parameter(10) \#Parameter(11) \#Parameter(12) \#Parameter(13) \#Parameter(14) \#Parameter(15) \#Parameter(16) \#Parameter(17) \#Parameter(18) \#Parameter(19) \#Parameter(20) \#Parameter(21) \#Parameter(22) \#Parameter(23) \#Parameter(24) \#Parameter(25) \#Parameter(26) \#Parameter(27) \#Parameter(28) \#Parameter(29) \#Parameter(30) \#Parameter(31) \#Parameter(32) \#Parameter(33) \#Parameter(34) \#Parameter(35) \#Parameter(36) \#Parameter(37) \#Parameter(38) \#Parameter(39) \#Parameter(40) \#Parameter(41) \#Parameter(42) \#Parameter(43) \#Parameter(44) \#Parameter(45) \#Parameter(46) \#Parameter(47) \#Parameter(48) \#Parameter(49) \#Parameter(50) \#Parameter(51) \#Parameter(52) \#Parameter(53)"
//\ ПоЗначениямРасширенный(Таблица,\ -,\ Модификатор,\ ПрисоединяемыеТаблицы,\ О,\ В1,П1,О1,\ В2,П2,О2,\.\.\.,\ В(n),\ П(n),\ О(n))\.\n//\ №\ параметра\:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1,\ 2,\ \ \ \ \ \ \ \ \ \ \ 3,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 4,\ 5,\ \ 6,\ 7,\ 8,\ \ 9,10,11,\.\.\.,3+n*3,4+n*3,5+n*3\.\n//\ Читается\ так\:\ "ограничение\ доступа\ по\ значениям\ расширенный"\.\n//\ Параметры\:\n//\ \ \ \ \ Таблица\ \ \ -\ Имя\ текущей\ таблицы,\ например\ "Документ\.ПоступлениеТоваровИУслуг"\.\n//\ \ \ \ \ Модификатор\ -\ изменяет\ шаблон\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1-й\ модификатор\ -\ строка\ "НеОграничиватьДоступКГруппам"\ указывает\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ безусловно\ выбирать\ группы\ иерархического\ справочника\.\ \n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Других\ модификаторов\ в\ этой\ версии\ шаблона\ не\ предусмотрено\.\n//\ \ \ \ \ ПрисоединяемыеТаблицы\ -\ текст\ присоедиения\ дополнительных\ таблиц\ на\ языке\ запросов,\ например,\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "ВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ Документ\.АвансовыйОтчет\.ОплатаПоставщикам\ КАК\ Т1\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ПО\ Т\.Ссылка\ \=\ Т1\.Ссылка"\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Присоединение\ позволяет\ указать\ поля\ таблицы\ ОплатаПоставщикам,\ как\ поля\ основной\ таблицы\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ для\ проверки\ их\ значений,\ как\ значений\ основной\ таблицы\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Следует\ помнить,\ что\ при\ размножении\ строк\ в\ результате\ соединения,\ достаточно\ чтобы\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ всего\ одна\ строка\ прошла\ условия\ проверки,\ т\.е\.\ результаты\ проверки\ строк\ объединяются\ по\ "ИЛИ"\.\n//\ \ \ \ \ О\ \ \ \ \ \ \ \ \ -\ Начальные\ скобки\ "("\.\n//\ \ \ \ \ В(n)\ \ \ \ \ \ -\ Вид\ доступа\ -\ имя\ вида\ доступа,\ например,\ "Организации"\.\ Для\ полей\ составного\ типа,\ с\ целью\ повышения\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ производительности,\ лучше\ указать\ несколько\ имен,\ например,\ "Организации,ГруппыФизическихЛиц",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ чем\ использовать\ несколько\ блоков\ параметров,\ с\ одним\ и\ тем\ же\ именем\ поля\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Специальные\ виды\ доступа\ "Условие",\ "НастройкиПрав",\ "ПравоЧтения",\ "ПравоИзменения",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "ПравоЧтенияПоИдентификатору",\ "ПравоИзмененияПоИдентификатору"\ можно\ использовать\ только\ отдельно\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ В(n)\ \=\ "Условие"\ (или\ ""),\ тогда\ П(n)\ содержит\ строку\ условия\ на\ языке\ запросов,\ например\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "Т\.Автор\ \=\ &АвторизованныйПользователь",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "ТИПЗНАЧЕНИЯ(Т\.Владелец)\ \=\ ТИП(Справочник\.Организации)",\ где\ Т\ -\ псевдоним\ текущей\ таблицы\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ В(n)\ \=\ "ПравоЧтения"\ Или\ "ПравоИзменения",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ выполняется\ проверка\ наличия\ права\ на\ таблицу\ значения\ Т\.П(n)\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Когда\ В(n)\ \=\ "ПравоЧтенияПоИдентификатору"\ или\ "ПравоИзмененияПоИдентификатору",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ выполняется\ проверка\ наличия\ права\ на\ таблицу\ по\ идентификатору\ в\ значении\ Т\.П(n)\.\n//\ \ \ \ \ П(n)\ \ \ \ \ \ -\ Поле\ проверяемого\ значения\ с\ псевдонимом,\ например\ "Т\.Организация",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ кроме\ случая\ В(n)\ \=\ "Условие"\ (или\ "")\.\n//\ \ \ \ \ О(n)\ \ \ \ \ \ -\ Логические\ операции\ "И",\ "ИЛИ"\ в\ сочетании\ с\ скобками\ "(",\ ")"\.\n//\ \ Примечение\:\ максимальное\ количество\ одновременно\ проверяемых\ значений\ полей\ можно\ увеличить,\ изменив\ шаблон,\ но\n//\ необходимо\ будет\ указывать\ все\ параметры\ шаблона,\ т\.е\.\ указывать\ пустые\ строки,\ когда\ количество\ полей\ меньше\ максимального\.\n//\ \ Шаблон\ имеет\ структуру\:\n//\ \ \ \ \ <Общая\ часть\ условий>\ <Условие\ по\ группе\ параметров\ 1>\ И/ИЛИ\ <Условие\ по\ группе\ параметров\ 2>\ И/ИЛИ\ \.\.\.\ <Условие\ по\ группе\ параметров(n)>\n//\ \ Пример\:\n//\ \ \ \ \ \ ПоЗначениямРасширенный("Документ\.ПеремещениеТоваров",\ "",\ "",\n//\ \ \ \ \ \ "",\n//\ \ \ \ \ \ "",\n//\ \ \ \ \ \ "Организации","Т\.Организация","И(",\n//\ \ \ \ \ \ "Склады","Т\.СкладОтправитель","ИЛИ",\n//\ \ \ \ \ \ "Склады","Т\.СкладПолучатель",")",\ "","","",\ \.\.\.)\n\n\#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \=\ ""\ \#Тогда\ //\ Информационная\ база\ заблокирована\ для\ обновления\.\n\ \ \ \ ГДЕ\ ЛОЖЬ\n\n\#ИначеЕсли\ Не\ СтрСодержит(&ВерсииШаблоновОграниченияДоступа,\ ",ПоЗначениямРасширенный18,")\ \#Тогда\n\ \ \ \ Ошибка\:\ Требуется\ обновить\ шаблон\ на\ актуальную\ версию,\ поставляемую\ в\ роли\ ИзменениеУчастниковГруппДоступа\ по\ причине\:\ Используется\ устаревшая\ версия\ 18\ шаблона\ ограничения\ доступа\ ПоЗначениямРасширенный\.\ Объект\:\ \#ИмяТекущейТаблицы,\ Право\:\ \#ИмяТекущегоПраваДоступа\.\n\n\#Иначе\n\n//\ Проверка\ правильности\ параметра\ Право\.\n\#Если\ Не\ ("\#Параметр(2)"\ \=\ "Чтение"\ \ \ \ Или\ "\#Параметр(2)"\ \=\ "Добавление"\ Или\n\ \ \ \ \ \ \ \ \ \ "\#Параметр(2)"\ \=\ "Изменение"\ Или\ "\#Параметр(2)"\ \=\ "Удаление"\ \ \ Или\ "\#Параметр(2)"\ \=\ "")\n\ \ \ \ \ \ Или\ \#ИмяТекущегоПраваДоступа\ <>\ "Чтение"\ И\ "\#Параметр(2)"\ \ \=\ "Чтение"\n\ \ \ \ \ \ Или\ \#ИмяТекущегоПраваДоступа\ \ \=\ "Чтение"\ И\ "\#Параметр(2)"\ <>\ "Чтение"\ И\ "\#Параметр(2)"\ <>\ ""\ \#Тогда\n\ \ \ \ //\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\ \ \ \ НеверноеПраво\:\ \#Параметр(2)\n\#КонецЕсли\n\n//\ Проверка\ правильности\ параметра\ ИмяТаблицы\.\n\#Если\ "\#Параметр(1)"\ <>\ \#ИмяТекущейТаблицы\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\tНеверноеИмяТекущейТаблицы\:\ "\#Параметр(1)"\n\#КонецЕсли\n\n//\ Проверка\ правильности\ параметра\ Модификатор\.\n\#Если\ Не\ ("\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам"\ Или\ "\#Параметр(3)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\tНеверныйМодификатор\:\ \#Параметр(3)\n\#КонецЕсли\n\n//\ Общая\ проверка\ использования\ ограничений\ доступа\ на\ уровне\ записей\ и\n//\ проверка\ использования\ хотя\ бы\ одного\ ограничения\ из\ указанных\ видов\ доступа\.\n\#Если\ Не\n\ \ \ \ \ (\ \ Истина\n\ \ \ \ \ \ И\ ("\#Параметр(6)"\ \=\ ""\ И\ "\#Параметр(7)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(6),"))\n\ \ \ \ \ \ И\ ("\#Параметр(9)"\ \=\ ""\ И\ "\#Параметр(10)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(9),"))\n\ \ \ \ \ \ И\ ("\#Параметр(12)"\ \=\ ""\ И\ "\#Параметр(13)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(12),"))\n\ \ \ \ \ \ И\ ("\#Параметр(15)"\ \=\ ""\ И\ "\#Параметр(16)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(15),"))\n\ \ \ \ \ \ И\ ("\#Параметр(18)"\ \=\ ""\ И\ "\#Параметр(19)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(18),"))\n\ \ \ \ \ \ И\ ("\#Параметр(21)"\ \=\ ""\ И\ "\#Параметр(22)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(21),"))\n\ \ \ \ \ \ И\ ("\#Параметр(24)"\ \=\ ""\ И\ "\#Параметр(25)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(24),"))\n\ \ \ \ \ \ И\ ("\#Параметр(27)"\ \=\ ""\ И\ "\#Параметр(28)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(27),"))\n\ \ \ \ \ \ И\ ("\#Параметр(30)"\ \=\ ""\ И\ "\#Параметр(31)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(30),"))\n\ \ \ \ \ \ И\ ("\#Параметр(33)"\ \=\ ""\ И\ "\#Параметр(34)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(33),"))\n\ \ \ \ \ \ И\ ("\#Параметр(36)"\ \=\ ""\ И\ "\#Параметр(37)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(36),"))\n\ \ \ \ \ \ И\ ("\#Параметр(39)"\ \=\ ""\ И\ "\#Параметр(40)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(39),"))\n\ \ \ \ \ \ И\ ("\#Параметр(42)"\ \=\ ""\ И\ "\#Параметр(43)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(42),"))\n\ \ \ \ \ \ И\ ("\#Параметр(45)"\ \=\ ""\ И\ "\#Параметр(46)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(45),"))\n\ \ \ \ \ \ И\ ("\#Параметр(48)"\ \=\ ""\ И\ "\#Параметр(49)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(48),"))\n\ \ \ \ \ \ И\ ("\#Параметр(51)"\ \=\ ""\ И\ "\#Параметр(52)"\ \=\ ""\n\ \ \ \ \ \ \ \ \ Или\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\n\ \ \ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(",Объект,\ ,ПравоЧтения,ПравоИзменения,ПравоЧтенияПоИдентификатору,ПравоИзмененияПоИдентификатору,",\ ",\#Параметр(51),"))\n\ \ \ \ \ )\ \#Тогда\n\nТ\ ИЗ\ Т\ //\ Т\ -\ псевдоним\ текущей\ таблицы\ (выбран\ коротким,\ чтобы\ сократить\ количество\ символов\ в\ тексте\ параметра-условия\ на\ языке\ запросов)\.\n\n//\ Присоединяемые\ таблицы\ к\ проверяемой\ строке\ текущей\ таблицы\ "Т"\.\n\#Параметр(4)\n\nГДЕ\n\nИСТИНА\ В\n(\t//\ Проверка\ права\ пользователя\ на\ текущую\ таблицу\ в\ целом\.\n\t//\ Права\ на\ таблицы\ формируются\ по\ составу\ ролей\ профиля\ группы\ доступа\.\n\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\tИЗ\n\t\#Если\ СтрСодержит(&ТаблицыРасширенийСОграничениемДоступа,\ "|\#Параметр(1);")\ \#Тогда\n\t\tСправочник\.ИдентификаторыОбъектовРасширений\ КАК\ СвойстваТекущейТаблицы\n\t\#Иначе\n\t\tСправочник\.ИдентификаторыОбъектовМетаданных\ КАК\ СвойстваТекущейТаблицы\n\t\#КонецЕсли\n\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ Справочник\.ГруппыДоступа\ КАК\ ГруппыДоступа\n\t\tПО\n\t\t\t\ \ СвойстваТекущейТаблицы\.ПолноеИмя\ \=\ "\#Параметр(1)"\n\t\t\tИ\ ИСТИНА\ В\n\t\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\n\t\t\t\t\tРегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТаблицыГруппДоступа\.Таблица\ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Изменение"\ \#Тогда\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ПравоИзменение\n\t\t\t\t\t\#ИначеЕсли\ \#ИмяТекущегоПраваДоступа\ \=\ "Добавление"\ \#Тогда\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ПравоДобавление\n\t\t\t\t\t\#КонецЕсли\n\t\t\t\ \ )\n\t\t\tИ\ ГруппыДоступа\.Ссылка\ В\n\t\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\n\t\t\t\t\tГруппыДоступаПользователи\.Ссылка\ КАК\ ГруппаДоступа\n\t\t\t\tИЗ\n\t\t\t\t\tСправочник\.ГруппыДоступа\.Пользователи\ КАК\ ГруппыДоступаПользователи\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\tПО\n\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ ГруппыДоступаПользователи\.Пользователь\n\t\t\t\ \ )\n\tГДЕ\n\n//\ Безусловная\ выборка\ групп\ в\ иерархическом\ объекте\ метаданных\ (если\ нужно)\.\n\#Если\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам"\ \#Тогда\n\tТ\.ЭтоГруппа\ ИЛИ\n\#КонецЕсли\n\n\ \ (\ //\ Поиск\ значений\ заданных\ полей\ в\ разрешенных\ значениях\ групп\ доступа\ (пользователей)\.\n\n\t\#Параметр(5)\ \ //\ [([(][(]\.\.\.]\ 0-n\ открывающихся\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 1\.\n\#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(6)"\ \=\ "Условие"\ Или\ "\#Параметр(6)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t(\ \#Параметр(7)\ )\n\#ИначеЕсли\ "\#Параметр(6)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(6)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \ \#Параметр(7)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(7))\n\t\t\#Если\ Не\ "\#Параметр(6)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(6)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(6)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(7)\n\t\t\#Если\ Не\ "\#Параметр(6)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(6)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(7)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(7)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(6),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(6)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(6)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(6)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(6),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(7),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(6),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(6),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(7)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(6),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(7)\n\t\t\#ИначеЕсли\ "\#Параметр(7)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(6)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(6)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(6)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(6)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(6),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(7)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(7)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(7))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(7),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(8)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 2\.\n\#Если\ "\#Параметр(9)"\ \=\ ""\ И\ "\#Параметр(10)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(9)"\ \=\ "Условие"\ Или\ "\#Параметр(9)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(10)\ )\n\#ИначеЕсли\ "\#Параметр(9)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(9)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(10)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(10))\n\t\t\#Если\ Не\ "\#Параметр(9)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(9)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(9)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(10)\n\t\t\#Если\ Не\ "\#Параметр(9)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(9)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(10)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(10)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(9),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(9)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(9)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(9)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(9),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(10),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(9),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(9),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(10)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(9),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(10)\n\t\t\#ИначеЕсли\ "\#Параметр(10)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(9)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(9)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(9)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(9)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(9),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(10)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(10)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(10))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(10),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(11)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 3\.\n\#Если\ "\#Параметр(12)"\ \=\ ""\ И\ "\#Параметр(13)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(12)"\ \=\ "Условие"\ Или\ "\#Параметр(12)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(13)\ )\n\#ИначеЕсли\ "\#Параметр(12)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(12)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(13)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(13))\n\t\t\#Если\ Не\ "\#Параметр(12)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(12)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(12)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(13)\n\t\t\#Если\ Не\ "\#Параметр(12)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(12)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(13)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(13)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(12),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(12)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(12)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(12)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(12),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(13),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(12),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(12),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(13)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(12),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(13)\n\t\t\#ИначеЕсли\ "\#Параметр(13)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(12)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(12)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(12)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(12)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(12),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(13)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(13)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(13))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(13),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(14)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 4\.\n\#Если\ "\#Параметр(15)"\ \=\ ""\ И\ "\#Параметр(16)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(15)"\ \=\ "Условие"\ Или\ "\#Параметр(15)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(16)\ )\n\#ИначеЕсли\ "\#Параметр(15)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(15)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(16)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(16))\n\t\t\#Если\ Не\ "\#Параметр(15)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(15)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(15)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(16)\n\t\t\#Если\ Не\ "\#Параметр(15)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(15)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(16)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(16)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(15),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(15)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(15)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(15)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(15),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(16),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(15),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(15),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(16)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(15),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(16)\n\t\t\#ИначеЕсли\ "\#Параметр(16)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(15)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(15)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(15)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(15)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(15),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(16)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(16)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(16))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(16),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(17)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 5\.\n\#Если\ "\#Параметр(18)"\ \=\ ""\ И\ "\#Параметр(19)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(18)"\ \=\ "Условие"\ Или\ "\#Параметр(18)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(19)\ )\n\#ИначеЕсли\ "\#Параметр(18)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(18)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(19)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(19))\n\t\t\#Если\ Не\ "\#Параметр(18)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(18)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(18)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(19)\n\t\t\#Если\ Не\ "\#Параметр(18)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(18)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(19)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(19)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(18),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(18)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(18)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(18)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(18),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(19),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(18),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(18),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(19)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(18),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(19)\n\t\t\#ИначеЕсли\ "\#Параметр(19)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(18)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(18)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(18)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(18)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(18),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(19)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(19)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(19))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(19),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(20)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 6\.\n\#Если\ "\#Параметр(21)"\ \=\ ""\ И\ "\#Параметр(22)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(21)"\ \=\ "Условие"\ Или\ "\#Параметр(21)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(22)\ )\n\#ИначеЕсли\ "\#Параметр(21)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(21)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(22)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(22))\n\t\t\#Если\ Не\ "\#Параметр(21)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(21)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(21)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(22)\n\t\t\#Если\ Не\ "\#Параметр(21)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(21)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(22)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(22)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(21),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(21)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(21)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(21)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(21),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(22),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(21),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(21),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(22)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(21),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(22)\n\t\t\#ИначеЕсли\ "\#Параметр(22)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(21)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(21)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(21)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(21)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(21),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(22)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(22)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(22))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(22),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(23)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 7\.\n\#Если\ "\#Параметр(24)"\ \=\ ""\ И\ "\#Параметр(25)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(24)"\ \=\ "Условие"\ Или\ "\#Параметр(24)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(25)\ )\n\#ИначеЕсли\ "\#Параметр(24)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(24)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(25)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(25))\n\t\t\#Если\ Не\ "\#Параметр(24)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(24)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(24)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(25)\n\t\t\#Если\ Не\ "\#Параметр(24)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(24)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(25)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(25)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(24),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(24)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(24)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(24)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(24),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(25),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(24),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(24),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(25)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(24),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(25)\n\t\t\#ИначеЕсли\ "\#Параметр(25)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(24)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(24)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(24)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(24)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(24),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(25)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(25)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(25))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(25),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(26)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 8\.\n\#Если\ "\#Параметр(27)"\ \=\ ""\ И\ "\#Параметр(28)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(27)"\ \=\ "Условие"\ Или\ "\#Параметр(27)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(28)\ )\n\#ИначеЕсли\ "\#Параметр(27)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(27)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(28)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(28))\n\t\t\#Если\ Не\ "\#Параметр(27)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(27)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(27)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(28)\n\t\t\#Если\ Не\ "\#Параметр(27)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(27)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(28)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(28)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(27),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(27)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(27)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(27)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(27),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(28),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(27),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(27),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(28)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(27),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(28)\n\t\t\#ИначеЕсли\ "\#Параметр(28)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(27)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(27)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(27)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(27)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(27),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(28)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(28)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(28))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(28),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(29)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 9\.\n\#Если\ "\#Параметр(30)"\ \=\ ""\ И\ "\#Параметр(31)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(30)"\ \=\ "Условие"\ Или\ "\#Параметр(30)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(31)\ )\n\#ИначеЕсли\ "\#Параметр(30)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(30)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(31)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(31))\n\t\t\#Если\ Не\ "\#Параметр(30)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(30)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(30)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(31)\n\t\t\#Если\ Не\ "\#Параметр(30)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(30)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(31)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(31)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(30),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(30)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(30)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(30)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(30),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(31),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(30),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(30),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(31)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(30),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(31)\n\t\t\#ИначеЕсли\ "\#Параметр(31)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(30)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(30)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(30)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(30)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(30),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(31)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(31)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(31))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(31),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(32)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 10\.\n\#Если\ "\#Параметр(33)"\ \=\ ""\ И\ "\#Параметр(34)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(33)"\ \=\ "Условие"\ Или\ "\#Параметр(33)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(34)\ )\n\#ИначеЕсли\ "\#Параметр(33)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(33)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(34)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(34))\n\t\t\#Если\ Не\ "\#Параметр(33)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(33)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(33)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(34)\n\t\t\#Если\ Не\ "\#Параметр(33)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(33)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(34)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(34)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(33),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(33)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(33)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(33)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(33),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(34),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(33),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(33),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(34)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(33),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(34)\n\t\t\#ИначеЕсли\ "\#Параметр(34)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(33)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(33)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(33)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(33)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(33),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(34)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(34)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(34))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(34),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(35)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 11\.\n\#Если\ "\#Параметр(36)"\ \=\ ""\ И\ "\#Параметр(37)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(36)"\ \=\ "Условие"\ Или\ "\#Параметр(36)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(37)\ )\n\#ИначеЕсли\ "\#Параметр(36)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(36)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(37)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(37))\n\t\t\#Если\ Не\ "\#Параметр(36)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(36)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(36)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(37)\n\t\t\#Если\ Не\ "\#Параметр(36)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(36)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(37)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(37)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(36),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(36)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(36)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(36)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(36),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(37),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(36),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(36),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(37)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(36),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(37)\n\t\t\#ИначеЕсли\ "\#Параметр(37)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(36)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(36)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(36)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(36)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(36),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(37)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(37)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(37))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(37),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(38)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 12\.\n\#Если\ "\#Параметр(39)"\ \=\ ""\ И\ "\#Параметр(40)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(39)"\ \=\ "Условие"\ Или\ "\#Параметр(39)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(40)\ )\n\#ИначеЕсли\ "\#Параметр(39)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(39)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(40)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(40))\n\t\t\#Если\ Не\ "\#Параметр(39)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(39)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(39)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(40)\n\t\t\#Если\ Не\ "\#Параметр(39)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(39)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(40)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(40)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(39),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(39)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(39)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(39)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(39),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(40),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(39),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(39),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(40)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(39),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(40)\n\t\t\#ИначеЕсли\ "\#Параметр(40)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(39)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(39)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(39)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(39)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(39),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(40)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(40)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(40))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(40),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(41)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 13\.\n\#Если\ "\#Параметр(42)"\ \=\ ""\ И\ "\#Параметр(43)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(42)"\ \=\ "Условие"\ Или\ "\#Параметр(42)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(43)\ )\n\#ИначеЕсли\ "\#Параметр(42)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(42)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(43)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(43))\n\t\t\#Если\ Не\ "\#Параметр(42)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(42)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(42)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(43)\n\t\t\#Если\ Не\ "\#Параметр(42)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(42)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(43)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(43)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(42),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(42)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(42)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(42)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(42),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(43),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(42),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(42),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(43)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(42),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(43)\n\t\t\#ИначеЕсли\ "\#Параметр(43)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(42)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(42)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(42)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(42)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(42),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(43)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(43)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(43))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(43),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(44)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 14\.\n\#Если\ "\#Параметр(45)"\ \=\ ""\ И\ "\#Параметр(46)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(45)"\ \=\ "Условие"\ Или\ "\#Параметр(45)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(46)\ )\n\#ИначеЕсли\ "\#Параметр(45)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(45)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(46)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(46))\n\t\t\#Если\ Не\ "\#Параметр(45)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(45)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(45)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(46)\n\t\t\#Если\ Не\ "\#Параметр(45)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(45)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(46)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(46)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(45),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(45)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(45)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(45)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(45),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(46),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(45),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(45),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(46)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(45),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(46)\n\t\t\#ИначеЕсли\ "\#Параметр(46)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(45)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(45)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(45)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(45)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(45),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(46)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(46)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(46))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(46),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(47)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 15\.\n\#Если\ "\#Параметр(48)"\ \=\ ""\ И\ "\#Параметр(49)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(48)"\ \=\ "Условие"\ Или\ "\#Параметр(48)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(49)\ )\n\#ИначеЕсли\ "\#Параметр(48)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(48)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(49)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(49))\n\t\t\#Если\ Не\ "\#Параметр(48)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(48)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(48)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(49)\n\t\t\#Если\ Не\ "\#Параметр(48)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(48)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(49)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(49)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(48),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(48)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(48)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(48)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(48),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(49),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(48),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(48),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(49)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(48),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(49)\n\t\t\#ИначеЕсли\ "\#Параметр(49)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(48)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(48)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(48)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(48)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(48),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(49)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(49)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(49))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(49),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(50)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n////\ Проверка\ значения\ поля\ группы\ параметров\ 16\.\n\#Если\ "\#Параметр(51)"\ \=\ ""\ И\ "\#Параметр(52)"\ \=\ ""\ \#Тогда\n\t//\ Группа\ параметров\ не\ используется\.\n\#ИначеЕсли\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ И\ ("\#Параметр(51)"\ \=\ "Условие"\ Или\ "\#Параметр(51)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ имя\ вида\ доступа\ "Условие"\ (или\ ""),\ тогда\ вместо\ имени\ поля\ задано\ условие\.\n\t\ (\ \#Параметр(52)\ )\n\#ИначеЕсли\ "\#Параметр(51)"\ \=\ "ПравоЧтения"\ Или\ "\#Параметр(51)"\ \=\ "ПравоИзменения"\ \#Тогда\n\t\ \#Параметр(52)\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу\ Значения,\ установленного\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТИПЗНАЧЕНИЯ(ТаблицыГруппДоступаПроверкаПрава\.ТипТаблицы)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(52))\n\t\t\#Если\ Не\ "\#Параметр(51)"\ \=\ "ПравоЧтения"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ "\#Параметр(51)"\ \=\ "ПравоЧтенияПоИдентификатору"\ Или\ "\#Параметр(51)"\ \=\ "ПравоИзмененияПоИдентификатору"\ \#Тогда\n\t\ \ ИСТИНА\ В\n\t\ (\t//\ Проверка\ права\ пользователя\ на\ таблицу,\ идентификатор\ которой\ указан\ в\ Значении,\ установленном\ в\ поле\.\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПрава\n\t\tГДЕ\n\t\t\t\ \ ТаблицыГруппДоступаПроверкаПрава\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.Таблица\ \=\ \#Параметр(52)\n\t\t\#Если\ Не\ "\#Параметр(51)"\ \=\ "ПравоЧтенияПоИдентификатору"\ \#Тогда\n\t\t\tИ\ ТаблицыГруппДоступаПроверкаПрава\.ПравоИзменение\n\t\t\#КонецЕсли\n\t\ )\n\#ИначеЕсли\ Не\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \#Тогда\n\tИСТИНА\ //\ Группа\ параметров\ отключена\.\n\#ИначеЕсли\ "\#Параметр(51)"\ \=\ "НастройкиПрав"\ \#Тогда\n\t\n\t\ (\n\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(52)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\t\ И\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\.\n\t\t\t(\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\tПО\n\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ \#Параметр(52)\n\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\#Иначе\n\t\t\t\t\ \ \#Если\ СтрСодержит(&ТаблицыСОтдельнымиНастройкамиПрав,\ "|\#Параметр(1);")\ \#Тогда\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\ \ \#Иначе\n\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\ \ \#КонецЕсли\n\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\#КонецЕсли\n\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\tПО\n\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t)\n\t\ )\n\#ИначеЕсли\ Не\ СтрСодержит(&ВсеВидыДоступаКромеСпециальных,\ ",\#Параметр(51),")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\#Если\ СтрСодержит("\#Параметр(51)",\ ",")\ \#Тогда\n\t\tНеверныйВидДоступа\:\ "\#Параметр(51)"\ -\ "Список\ имен\ видов\ доступа\ не\ найден"\n\t\#Иначе\n\t\tНеверныйВидДоступа\:\ "\#Параметр(51)"\ -\ "Имя\ вида\ доступа\ не\ найдено"\n\t\#КонецЕсли\n\#ИначеЕсли\ &ВидыДоступаСОтключеннымИспользованием\ <>\ "Все"\n\ \ \ \ \ \ \ \ \ И\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",\#Параметр(51),")\ \#Тогда\n\t\n\t\ (\n\t\t\tЕСТЬNULL(\#Параметр(52),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\t\t\tИ\n\t\t\#Если\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\ \ \ \ \ \ \ \ И\ СтрСодержит(",\#Параметр(51),",\ ",Пользователи,"))\n\t\t\ \ Или\ (Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ И\ СтрСодержит(",\#Параметр(51),",\ ",ВнешниеПользователи,"))\ \#Тогда\n\t\t\tНЕ\n\t\t\t(\n\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ \#Параметр(52)\n\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t)\n\t\t\tИ\ НЕ\n\t\t\#Иначе\n\t\t\t(\n\t\t\#КонецЕсли\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\#Если\ СтрСодержит(&ВидыДоступаБезГруппДляЗначенияДоступа,\ ",\#Параметр(51),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ \#Параметр(52)\n\t\t\#ИначеЕсли\ "\#Параметр(52)"\ \=\ "Т\.Ссылка"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(51)"\ <>\ "Пользователи"\n\t\t\ \ \ \ \ \ \ \ \ И\ "\#Параметр(51)"\ <>\ "ВнешниеПользователи"\ \#Тогда\n\t\t\t\#Если\ СтрСодержит("\#Параметр(51)",\ ",")\ \#Тогда\n\t\t\t\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\t\t\t\tНеверныйВидДоступа\:\ "\#Параметр(51)"\ -\ "При\ проверке\ таблицы\ значения\ доступа\ можно\ указывать\ только\ один\ вид\ доступа"\n\t\t\t\#ИначеЕсли\ СтрСодержит(&ВидыДоступаСОднойГруппойДляЗначенияДоступа,\ ",\#Параметр(51),")\ \#Тогда\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\tГДЕ\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ Т\.ГруппаДоступа\n\t\t\t\#Иначе\ //\ Значения\ доступа,\ для\ которых\ можно\ указать\ несколько\ групп\ значений\ доступа\.\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ \#Параметр(1)\.ГруппыДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ ГруппыЗначений\.ГруппаДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.Ссылка\ \ \ \ \=\ \#Параметр(52)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\tПО\n\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ \#Параметр(52)\n\t\t\#КонецЕсли\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t\=\n\t\t\tВЫБОР\n\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\tГДЕ\n\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(\#Параметр(52))\n\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\tКОНЕЦ\n\t\t\t)\n\t\ )\n\#Иначе\n\tЕСТЬNULL(\#Параметр(52),\ НЕОПРЕДЕЛЕНО)\ <>\ НЕОПРЕДЕЛЕНО\n\#КонецЕсли\n\n\t\#Параметр(53)\ \ //\ [)[)][)]\.\.\.]\ [ИЛИ|И]\ [([(][(]\.\.\.]\ оператор\ И/ИЛИ\ с/без\ скобок\.\n\n\ \ )\n)\n\#КонецЕсли\n\n\#КонецЕсли\ //\ Информационная\ база\ заблокирована\ для\ обновления\.=Error\: template not supported "\#Parameter(1) \#Parameter(2) \#Parameter(3) \#Parameter(4) \#Parameter(5) \#Parameter(6) \#Parameter(7) \#Parameter(8) \#Parameter(9) \#Parameter(10) \#Parameter(11) \#Parameter(12) \#Parameter(13) \#Parameter(14) \#Parameter(15) \#Parameter(16) \#Parameter(17) \#Parameter(18) \#Parameter(19) \#Parameter(20) \#Parameter(21) \#Parameter(22) \#Parameter(23) \#Parameter(24) \#Parameter(25) \#Parameter(26) \#Parameter(27) \#Parameter(28) \#Parameter(29) \#Parameter(30) \#Parameter(31) \#Parameter(32) \#Parameter(33) \#Parameter(34) \#Parameter(35) \#Parameter(36) \#Parameter(37) \#Parameter(38) \#Parameter(39) \#Parameter(40) \#Parameter(41) \#Parameter(42) \#Parameter(43) \#Parameter(44) \#Parameter(45) \#Parameter(46) \#Parameter(47) \#Parameter(48) \#Parameter(49) \#Parameter(50) \#Parameter(51) \#Parameter(52) \#Parameter(53)"
//\ ПоНаборамЗначений(Таблица,\ -,\ Модификатор,\ ВладелецНаборов)\.\n//\ №\ параметра\:\ \ \ \ \ \ \ \ \ \ \ \ 1,\ 2,\ \ \ \ \ \ \ \ \ \ \ 3,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 4\.\n//\ Читается\ так\:\ "ограничение\ доступа\ по\ наборам\ значений"\.\n//\ Параметры\:\n//\ \ \ \ \ Таблица\ \ \ -\ Имя\ текущей\ таблицы,\ например\ "Документ\.ПоступлениеТоваровИУслуг"\.\n//\ \ \ \ \ Модификатор\ -\ изменяет\ шаблон\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1-й\ модификатор\ -\ строка\ "НеОграничиватьДоступКГруппам"\ указывает\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ безусловно\ выбирать\ группы\ иерархического\ справочника\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2-й\ модификатор\ -\ строка\ "РасширенноеИЛИ"\ указывает\ для\ ограничений,\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ например,\ "ПоОрганизациям\ или\ ПоУчетнымЗаписям"\ делать\ расширенную\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ проверку,\ при\ которой\ вариант\ настройки\ вида\ доступа\ в\ группах\ доступа\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "Все\ разрешены,\ без\ запрещенных"\ считается,\ как\ "Вид\ доступа\ не\ используется"\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Если\ этого\ модификатора\ нет,\ тогда\ результат\ проверки\ Истина,\ что\ приводит\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ к\ итоговому\ результату\ Истина,\ если\ "Все\ разрешены,\ без\ запрещенных"\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ хотя\ бы\ по\ одному\ из\ видов\ доступа\ (либо\ ПоОрганизациям,\ либо\ ПоУчетнымЗаписям)\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Модификатор\ имеет\ смысл\ только\ при\ проверке\ наборов\ значений\ доступа\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Можно\ использовать\ комбинации\ модификаторов\:\ "НеОграничиватьДоступКГруппам",\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "РасширенноеИЛИ",\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Других\ модификаторов\ в\ этой\ версии\ шаблона\ не\ предусмотрено\.\n//\ \ \ \ \ ВладелецНаборов\ -\ имя\ поля,\ содержащего\ ссылку\ на\ объект-владелец\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ наборов\ значений\ доступа\ в\ регистре\ сведений\ НаборыЗначенийДоступа\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Если\ имя\ поля\ не\ задано,\ считается,\ что\ проверяется\ сам\ объект-владелец\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ наборов\ значений\ доступа,\ который\ имеет\ табличную\ часть\ <Таблица>\.НаборыЗначенийДоступа\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Эта\ табличная\ часть\ применяется,\ когда\ Право\ \=\ "Изменение"\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Табличная\ часть\ точно\ такая,\ как\ РегистрСведений\.НаборыЗначенийДоступа\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ без\ измерения\ Объект\ и\ реквизитов\.\n//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Для\ журналов\ документов\ нужно\ указать\ "Ссылка"\.\n//\n//\ Пример1\:\ ПоНаборамЗначений("Документ\.КорректировкаДенежныхСредств",\ "",\ "",\ "")\n//\ Пример2\:\ ПоНаборамЗначений("Документ\.ПоступлениеТоваровИУслуг",\ \ \ \ \ "",\ "",\ "")\n//\ Пример3\:\ ПоНаборамЗначений("ЖурналДокументов\.СкладскиеДокументы",\ \ \ "",\ "",\ "Ссылка")\n//\ Пример4\:\ ПоНаборамЗначений("Справочник\.ВложенияЭлектронныхПисем",\ \ \ "",\ "",\ "Владелец")\n\n\#Если\ &ОграничениеДоступаНаУровнеЗаписейИспользуется\ \=\ ""\ \#Тогда\ //\ Информационная\ база\ заблокирована\ для\ обновления\.\n\ \ \ \ ГДЕ\ ЛОЖЬ\n\n\#ИначеЕсли\ Не\ СтрСодержит(&ВерсииШаблоновОграниченияДоступа,\ ",ПоНаборамЗначений18,")\ \#Тогда\n\ \ \ \ Ошибка\:\ Требуется\ обновить\ шаблон\ на\ актуальную\ версию,\ поставляемую\ в\ роли\ ИзменениеУчастниковГруппДоступа\ по\ причине\:\ Используется\ устаревшая\ версия\ 18\ шаблона\ ограничения\ доступа\ ПоНаборамЗначений\.\ Объект\:\ \#ИмяТекущейТаблицы,\ Право\:\ \#ИмяТекущегоПраваДоступа\.\n\n\#Иначе\n\n//\ Проверка\ правильности\ параметра\ Право\.\n\#Если\ Не\ ("\#Параметр(2)"\ \=\ "Чтение"\ \ \ \ Или\ "\#Параметр(2)"\ \=\ "Добавление"\ Или\n\ \ \ \ \ \ \ \ \ \ "\#Параметр(2)"\ \=\ "Изменение"\ Или\ "\#Параметр(2)"\ \=\ "Удаление"\ \ \ Или\ "\#Параметр(2)"\ \=\ "")\n\ \ \ \ \ \ Или\ \#ИмяТекущегоПраваДоступа\ <>\ "Чтение"\ И\ "\#Параметр(2)"\ \ \=\ "Чтение"\n\ \ \ \ \ \ Или\ \#ИмяТекущегоПраваДоступа\ \ \=\ "Чтение"\ И\ "\#Параметр(2)"\ <>\ "Чтение"\ И\ "\#Параметр(2)"\ <>\ ""\ \#Тогда\n\ \ \ \ //\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\ \ \ \ НеверноеПраво\:\ \#Параметр(2)\n\#КонецЕсли\n\n//\ Проверка\ правильности\ параметра\ ИмяТаблицы\.\n\#Если\ "\#Параметр(1)"\ <>\ \#ИмяТекущейТаблицы\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\tНеверноеИмяТекущейТаблицы\:\ "\#Параметр(1)"\n\#КонецЕсли\n\n//\ Проверка\ правильности\ параметра\ Модификатор\.\n\#Если\ Не\ (\ \ \ \ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам"\n\ \ \ \ \ \ \ \ \ \ Или\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\n\ \ \ \ \ \ \ \ \ \ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\n\ \ \ \ \ \ \ \ \ \ Или\ "\#Параметр(3)"\ \=\ "")\ \#Тогда\n\t//\ Когда\ параметр\ задан\ неверно,\ вставляется\ строка,\ чтобы\ вызвать\ ошибку\ сборки\ ограничения\ доступа\.\n\tНеверныйМодификатор\:\ \#Параметр(3)\n\#КонецЕсли\n\n//\ Общая\ проверка\ использования\ ограничений\ доступа\ на\ уровне\ записей\.\n\#Если\ &ОграничиватьДоступНаУровнеЗаписей\ \#Тогда\n\nТ\ ГДЕ\ //\ Т\ -\ псевдоним\ текущей\ таблицы\ (выбран\ коротким,\ чтобы\ сократить\ количество\ символов\ в\ тексте\ параметра-условия\ на\ языке\ запросов)\.\n\nИСТИНА\ В\n(\t//\ Проверка\ права\ пользователя\ на\ текущую\ таблицу\ в\ целом\.\n\t//\ Права\ на\ таблицы\ формируются\ по\ составу\ ролей\ профиля\ группы\ доступа\.\n\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\tИЗ\n\t\#Если\ СтрСодержит(&ТаблицыРасширенийСОграничениемДоступа,\ "|\#Параметр(1);")\ \#Тогда\n\t\tСправочник\.ИдентификаторыОбъектовРасширений\ КАК\ СвойстваТекущейТаблицы\n\t\#Иначе\n\t\tСправочник\.ИдентификаторыОбъектовМетаданных\ КАК\ СвойстваТекущейТаблицы\n\t\#КонецЕсли\n\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ Справочник\.ГруппыДоступа\ КАК\ ГруппыДоступа\n\t\tПО\n\t\t\t\ \ СвойстваТекущейТаблицы\.ПолноеИмя\ \=\ "\#Параметр(1)"\n\t\t\tИ\ ИСТИНА\ В\n\t\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\tИЗ\n\t\t\t\t\tРегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступа\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТаблицыГруппДоступа\.Таблица\ \ \ \ \ \ \ \=\ СвойстваТекущейТаблицы\.Ссылка\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Изменение"\ \#Тогда\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ПравоИзменение\n\t\t\t\t\t\#ИначеЕсли\ \#ИмяТекущегоПраваДоступа\ \=\ "Добавление"\ \#Тогда\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступа\.ПравоДобавление\n\t\t\t\t\t\#КонецЕсли\n\t\t\t\ \ )\n\t\t\tИ\ ГруппыДоступа\.Ссылка\ В\n\t\t\t\ \ (\n\t\t\t\tВЫБРАТЬ\n\t\t\t\t\tГруппыДоступаПользователи\.Ссылка\ КАК\ ГруппаДоступа\n\t\t\t\tИЗ\n\t\t\t\t\tСправочник\.ГруппыДоступа\.Пользователи\ КАК\ ГруппыДоступаПользователи\n\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\tПО\n\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ ГруппыДоступаПользователи\.Пользователь\n\t\t\t\ \ )\n\tГДЕ\n\n//\ Безусловная\ выборка\ групп\ в\ иерархическом\ объекте\ метаданных\ (если\ нужно)\.\n\#Если\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\tТ\.ЭтоГруппа\ Или\n\#КонецЕсли\n\n\#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\ НЕ\n\ (\n\ \ ИСТИНА\ В\ //\ Не\ все\ проверки\ отключены\.\n\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ с\ не\ отключенной\ проверкой\.\n\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\#Если\ "\#Параметр(4)"\ \=\ ""\ \#Тогда\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ Т\.Ссылка\n\t\t\t\#Иначе\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ Т\.\#Параметр(4)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\tИЗ\ \#Параметр(1)\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Ссылка\ \=\ Т\.Ссылка\n\t\t\#КонецЕсли\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\tИ\ НомераНаборов\.Чтение\n\t\t\t\#Иначе\n\t\t\t\tИ\ НомераНаборов\.Изменение\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\ \n\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t(\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\tГДЕ\n\t\t\#Если\ "\#Параметр(4)"\ \=\ ""\ \#Тогда\n\t\t\t\ \ НаборыЗначений\.Объект\ \=\ Т\.Ссылка\n\t\t\#Иначе\n\t\t\t\ \ НаборыЗначений\.Объект\ \=\ Т\.\#Параметр(4)\n\t\t\#КонецЕсли\n\t\#Иначе\n\t\tИЗ\ \#Параметр(1)\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\tГДЕ\n\t\t\t\ \ НаборыЗначений\.Ссылка\ \=\ Т\.Ссылка\n\t\#КонецЕсли\n\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t)\n\t)\n\ \ )\ И\ НЕ\n\#Иначе\n\ (\n\#КонецЕсли\n\ \ ИСТИНА\ В\n\ \ (\n\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первого\ набора\ по\ которому\ доступ\ разрешен\.\n\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\#Если\ "\#Параметр(4)"\ \=\ ""\ \#Тогда\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ Т\.Ссылка\n\t\t\t\#Иначе\n\t\t\t\t\ \ НомераНаборов\.Объект\ \=\ Т\.\#Параметр(4)\n\t\t\t\#КонецЕсли\n\t\t\#Иначе\n\t\t\tИЗ\ \#Параметр(1)\.НаборыЗначенийДоступа\ КАК\ НомераНаборов\n\t\t\tГДЕ\n\t\t\t\t\ \ НомераНаборов\.Ссылка\ \=\ Т\.Ссылка\n\t\t\#КонецЕсли\n\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\tИ\ НомераНаборов\.Чтение\n\t\t\t\#Иначе\n\t\t\t\tИ\ НомераНаборов\.Изменение\n\t\t\t\#КонецЕсли\n\t\t\t\tИ\n\ \ \#Если\ "\#Параметр(3)"\ \=\ "РасширенноеИЛИ"\ Или\ "\#Параметр(3)"\ \=\ "НеОграничиватьДоступКГруппам,РасширенноеИЛИ"\ \#Тогда\n\tИСТИНА\ В\ //\ Не\ все\ проверки\ текущего\ набора\ отключены\.\n\t(\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Выбор\ первой\ не\ отключенной\ проверки\ текущего\ набора\.\n\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\tГДЕ\n\t\t\#Если\ "\#Параметр(4)"\ \=\ ""\ \#Тогда\n\t\t\t\ \ НаборыЗначений\.Объект\ \=\ Т\.Ссылка\n\t\t\#Иначе\n\t\t\t\ \ НаборыЗначений\.Объект\ \=\ Т\.\#Параметр(4)\n\t\t\#КонецЕсли\n\t\#Иначе\n\t\tИЗ\ \#Параметр(1)\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\tГДЕ\n\t\t\t\ \ НаборыЗначений\.Ссылка\ \=\ Т\.Ссылка\n\t\#КонецЕсли\n\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\ //\ Поиск\ настроек\ ограничений\ доступа\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\tИ\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\tИ\ ЗначенияПоУмолчанию\.БезНастройки\ \=\ ИСТИНА\n\t\t\t\t)\n\t)\ И\n\ \ \#КонецЕсли\n\tНЕ\ ЛОЖЬ\ В\ //\ Все\ проверки\ успешны\.\n\t(\n\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\ //\ Выбор\ первого\ не\ разрешенного\ значения\ доступа\.\n\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\tИЗ\ РегистрСведений\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\tГДЕ\n\t\t\#Если\ "\#Параметр(4)"\ \=\ ""\ \#Тогда\n\t\t\t\ \ НаборыЗначений\.Объект\ \=\ Т\.Ссылка\n\t\t\#Иначе\n\t\t\t\ \ НаборыЗначений\.Объект\ \=\ Т\.\#Параметр(4)\n\t\t\#КонецЕсли\n\t\#Иначе\n\t\tИЗ\ \#Параметр(1)\.НаборыЗначенийДоступа\ КАК\ НаборыЗначений\n\t\tГДЕ\n\t\t\t\ \ НаборыЗначений\.Ссылка\ \=\ Т\.Ссылка\n\t\#КонецЕсли\n\t\t\tИ\ НаборыЗначений\.НомерНабора\ \=\ НомераНаборов\.НомерНабора\n\t\t\tИ\ НЕ\n\t\t\tВЫБОР\n\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\ \ \#Если\ Не\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\tКОГДА\ НаборыЗначений\.ЗначениеБезГрупп\n\t\t\tТОГДА\n\t\t\t\tВЫБОР\n\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\tКОНЕЦ\n\t\t\t\t\=\n\t\t\t\tВЫБОР\n\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t)\n\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\tКОНЕЦ\n\t\t\ \ \#КонецЕсли\n\t\t\tКОГДА\ НаборыЗначений\.СтандартноеЗначение\n\t\t\#Иначе\n\t\t\tКОГДА\n\t\t\t\tИСТИНА\ В\n\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\tТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t)\n\t\t\#КонецЕсли\n\t\t\#Если\ &ВидыДоступаСОтключеннымИспользованием\ \=\ "Все"\ \#Тогда\n\t\t\tТОГДА\n\t\t\t\tИСТИНА\n\t\t\#Иначе\n\t\t\tТОГДА\n\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\tВЫБОР\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\tКОГДА\n\t\t\t\t\tНЕ\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовМетаданных\ КАК\ ТипыСсылок\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t)\n\t\t\t\t\tИ\ НЕ\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ Справочник\.ИдентификаторыОбъектовРасширений\ КАК\ ТипыСсылок\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ТИПЗНАЧЕНИЯ(ТипыСсылок\.ЗначениеПустойСсылки)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\tИ\ ТипыСсылок\.ЗначениеПустойСсылки\ В\ (&ТипыЗначенийДоступаСГруппами)\n\t\t\t\t\t\t)\n\t\t\t\tТОГДА\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\tКОГДА\n\t\t\t\t\tИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначенийДоступа\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\t\ \ ГруппыЗначенийДоступа\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ ГруппыЗначенийДоступа\.ГруппаЗначенийДоступа\ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t)\n\t\t\t\tТОГДА\n\t\t\t\t\tИСТИНА\n\t\t\t\#КонецЕсли\n\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\tИНАЧЕ\n\t\t\t\#КонецЕсли\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступа\ КАК\ Значения\n\t\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.ГруппыЗначенийДоступа\ КАК\ ГруппыЗначений\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ Значения\.ГруппаДоступа\ \ \ \ \ \ \ \ \ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\tИ\ Значения\.ЗначениеДоступа\ \ \ \ \ \ \ \=\ ГруппыЗначений\.ГруппаЗначенийДоступа\n\t\t\t\t\t\t\tИ\ ГруппыЗначений\.ЗначениеДоступа\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\t\t\=\n\t\t\t\t\tВЫБОР\n\t\t\t\t\tКОГДА\ ИСТИНА\ В\n\t\t\t\t\t\t(\n\t\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\t\tИЗ\ РегистрСведений\.ЗначенияГруппДоступаПоУмолчанию\ КАК\ ЗначенияПоУмолчанию\n\t\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ \ \ \ \ ЗначенияПоУмолчанию\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\t\ \ \ \ И\ ТИПЗНАЧЕНИЯ(ЗначенияПоУмолчанию\.ТипЗначенийДоступа)\ \=\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\n\t\t\t\t\t\t\ \ \ \ И\ ЗначенияПоУмолчанию\.ВсеРазрешены\ \=\ ЛОЖЬ\n\t\t\t\t\t\t)\n\t\t\t\t\tТОГДА\ ИСТИНА\n\t\t\t\t\tИНАЧЕ\ ЛОЖЬ\n\t\t\t\t\tКОНЕЦ\n\t\t\t\#Если\ Не\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\n\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",Пользователи,")\n\t\t\t\ \ Или\ Не\ СтрСодержит(&ВидыДоступаСОтключеннымИспользованием,\ ",ВнешниеПользователи,")\ \#Тогда\n\t\t\t\tКОНЕЦ\n\t\t\t\#КонецЕсли\n\t\t\#КонецЕсли\n\t\t\t//\ Проверка\ заведомого\ ложного\ или\ истинного\ однострочного\ набора\ значений\.\n\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступРазрешен)\n\t\t\tТОГДА\ ИСТИНА\n\t\t\tКОГДА\ НаборыЗначений\.ЗначениеДоступа\ \=\ ЗНАЧЕНИЕ(Перечисление\.ДополнительныеЗначенияДоступа\.ДоступЗапрещен)\n\t\t\tТОГДА\ ЛОЖЬ\n\t\t\t//\ Проверка\ права\ доступа\ пользователя\ к\ таблице\ ЗначенияДоступа\.\n\t\t\tКОГДА\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовМетаданных)\n\t\t\t\ \ ИЛИ\ ТИПЗНАЧЕНИЯ(НаборыЗначений\.ЗначениеДоступа)\ \=\ ТИП(Справочник\.ИдентификаторыОбъектовРасширений)\n\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t//\ Право\ Чтение\ может\ зависеть\ только\ от\ права\ Чтение\n\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t)\n\t\t\#Иначе\n\t\t\tТОГДА\ ИСТИНА\ В\n\t\t\t\t(\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.ТаблицыГруппДоступа\ КАК\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\n\t\t\t\t\tГДЕ\n\t\t\t\t\t\t\ \ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ГруппаДоступа\ \=\ ГруппыДоступа\.Ссылка\n\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.Таблица\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\tИ\ НЕ(НаборыЗначений\.Уточнение\ <>\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\n\t\t\t\t\t\t\t\tИ\ ТаблицыГруппДоступаПроверкаПраваНаОбъект\.ПравоИзменение\ \=\ ЛОЖЬ)\n\t\t\t\t)\n\t\t\#КонецЕсли\n\t\t\#Если\ Не\ &ТипыВладельцевНастроекПрав\ \=\ ""\ \#Тогда\n\t\t\tИНАЧЕ\n\t\t\t\t(\n\t\t\t\tИСТИНА\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ разрешено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ИСТИНА\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньРазрешенияИзменения\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\tИ\ НЕ\ ЛОЖЬ\ В\ //\ Проверка,\ что\ пользователю\ или\ какой-нибудь\ группе\ пользователя\ право\ запрещено\n\t\t\t\t\t(\n\t\t\t\t\tВЫБРАТЬ\ ПЕРВЫЕ\ 1\ ЛОЖЬ\n\t\t\t\t\tИЗ\ РегистрСведений\.НастройкиПравОбъектов\ КАК\ НастройкиПрав\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.НаследованиеНастроекПравОбъектов\ КАК\ НаследованиеНастроек\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ НаследованиеНастроек\.Объект\ \=\ НаборыЗначений\.ЗначениеДоступа\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Объект\ \ \ \ \ \ \ \ \=\ НаследованиеНастроек\.Родитель\n\t\t\t\t\t\t\#Если\ \#ИмяТекущегоПраваДоступа\ \=\ "Чтение"\ \#Тогда\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияЧтения\n\t\t\t\t\t\t\#Иначе\n\t\t\t\t\t\t\tИ\ НаследованиеНастроек\.УровеньИспользования\ <\ НастройкиПрав\.УровеньЗапрещенияИзменения\n\t\t\t\t\t\t\tИ\ НастройкиПрав\.Таблица\ \=\ ВЫБОР\n\t\t\t\t\t\t\t\tКОГДА\ НаборыЗначений\.Уточнение\ В\ (&ИдентификаторыТаблицСОтдельнымиНастройкамиПрав)\n\t\t\t\t\t\t\t\tТОГДА\ НаборыЗначений\.Уточнение\n\t\t\t\t\t\t\t\tИНАЧЕ\ ЗНАЧЕНИЕ(Справочник\.ИдентификаторыОбъектовМетаданных\.ПустаяСсылка)\ КОНЕЦ\n\t\t\t\t\t\t\#КонецЕсли\n\t\t\t\t\t\tВНУТРЕННЕЕ\ СОЕДИНЕНИЕ\ РегистрСведений\.СоставыГруппПользователей\ КАК\ СоставыГруппПользователей\n\t\t\t\t\t\tПО\n\t\t\t\t\t\t\t\ \ СоставыГруппПользователей\.Пользователь\ \ \ \ \ \ \ \ \=\ &АвторизованныйПользователь\n\t\t\t\t\t\t\tИ\ СоставыГруппПользователей\.ГруппаПользователей\ \=\ НастройкиПрав\.Пользователь\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\#Иначе\n\t\t\tИНАЧЕ\n\t\t\t\tЛОЖЬ\n\t\t\#КонецЕсли\n\t\t\tКОНЕЦ\n\t)\ //\ НЕ\ ЛОЖЬ\ В\n\ \ )\n\ )\n)\n\#КонецЕсли\n\n\#КонецЕсли\ //\ Информационная\ база\ заблокирована\ для\ обновления\.=Error\: template not supported "\#Parameter(1) \#Parameter(2) \#Parameter(3) \#Parameter(4)"
\#Если\ &ОграничениеДоступаНаУровнеЗаписейУниверсально\ \#Тогда\n\#ДляРегистра(\"ИдентификаторыОбъектовМетаданных\.РегистрСведенийДатыЗапретаИзменения\",\ \"Пользователь\",\ \"\",\ \"\",\ \"\",\ \"\")\n\#Иначе\n\n\ \ \#Если\ СтрСодержит(&ПраваДоступаКДатамЗапрета,\ \",ЧтениеДатЗапретаИзменения,\")\n\ \ \ \ \ \ И\ СтрСодержит(&ПраваДоступаКДатамЗапрета,\ \",ЧтениеДатЗапретаЗагрузки,\")\ \#ТОГДА\n\nГДЕ\ ИСТИНА\n\n\ \ \#ИначеЕсли\ СтрСодержит(&ПраваДоступаКДатамЗапрета,\ \",ЧтениеДатЗапретаИзменения,\")\ \#ТОГДА\n\nГДЕ\n\t\ \ \ \ ТИПЗНАЧЕНИЯ(Пользователь)\ \=\ ТИП(Справочник\.Пользователи)\n\tИЛИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ \=\ ТИП(Справочник\.ГруппыПользователей)\n\tИЛИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ \=\ ТИП(Справочник\.ВнешниеПользователи)\n\tИЛИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ \=\ ТИП(Справочник\.ГруппыВнешнихПользователей)\n\tИЛИ\ Пользователь\ \=\ ЗНАЧЕНИЕ(Перечисление\.ВидыНазначенияДатЗапрета\.ДляВсехПользователей)\n\n\ \ \#ИначеЕсли\ СтрСодержит(&ПраваДоступаКДатамЗапрета,\ \",ЧтениеДатЗапретаЗагрузки,\")\ \#ТОГДА\n\nГДЕ\n\t\ \ ТИПЗНАЧЕНИЯ(Пользователь)\ <>\ ТИП(Справочник\.Пользователи)\n\tИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ <>\ ТИП(Справочник\.ГруппыПользователей)\n\tИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ <>\ ТИП(Справочник\.ВнешниеПользователи)\n\tИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ <>\ ТИП(Справочник\.ГруппыВнешнихПользователей)\n\tИ\ Пользователь\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ Пользователь\ <>\ ЗНАЧЕНИЕ(Перечисление\.ВидыНазначенияДатЗапрета\.ПустаяСсылка)\n\tИ\ Пользователь\ <>\ ЗНАЧЕНИЕ(Перечисление\.ВидыНазначенияДатЗапрета\.ДляВсехПользователей)\n\n\ \ \#Иначе\n\nГДЕ\ ЛОЖЬ\n\n\ \ \#КонецЕсли\n\n\#КонецЕсли=\#IF &RecordLevelAccessRestrictionIsUniversal \#THEN\n\#ForRegister(\"MetadataObjectIDs.InformationRegisterPeriodClosingDates\", \"User\", \"\", \"\", \"\", \"\")\n\#ELSE\n\n  \#IF StrContains(&AccessRightsToRestrictionDates, \",ReadDataImportRestrictionDates,\")\n      AND StrContains(&AccessRightsToRestrictionDates, \",ReadDataImportRestrictionDates,\") \#THEN\n\nWHERE TRUE\n\n  \#ElseIf StrContains(&AccessRightsToRestrictionDates, \",ReadDataImportRestrictionDates,\") \#THEN\n\nWHERE\n\t    VALUETYPE(User) \= TYPE(Catalog.Users)\n\tOR VALUETYPE(User) \= TYPE(Catalog.UserGroups)\n\tOR VALUETYPE(User) \= TYPE(Catalog.ExternalUsers)\n\tOR VALUETYPE(User) \= TYPE(Catalog.ExternalUsersGroups)\n\tOR User \= VALUE(Enum.PeriodClosingDatesPurposeTypes.ForAllUsers)\n\n  \#ElseIf StrContains(&AccessRightsToRestrictionDates, \",ReadDataImportRestrictionDates,\") \#THEN\n\nWHERE\n\t  VALUETYPE(User) <> TYPE(Catalog.Users)\n\tAND VALUETYPE(User) <> TYPE(Catalog.UserGroups)\n\tAND VALUETYPE(User) <> TYPE(Catalog.ExternalUsers)\n\tAND VALUETYPE(User) <> TYPE(Catalog.ExternalUsersGroups)\n\tAND User <> Undefined\n\tAND User <> VALUE(Enum.PeriodClosingDatesPurposeTypes.EmptyRef)\n\tAND User <> VALUE(Enum.PeriodClosingDatesPurposeTypes.ForAllUsers)\n\n  \#Else\n\nWHERE FALSE\n\n  \#ENDIF\n\n\#ENDIF
\#Если\ &ОграничениеДоступаНаУровнеЗаписейУниверсально\ \#Тогда\n\#ДляРегистра(\"ИдентификаторыОбъектовМетаданных\.РегистрСведенийДатыЗапретаИзменения\",\ \"Пользователь\",\ \"\",\ \"\",\ \"\",\ \"\")\n\#Иначе\n\n\ \ \#Если\ СтрСодержит(&ПраваДоступаКДатамЗапрета,\ \",ИзменениеДатЗапретаИзменения,\")\n\ \ \ \ \ \ И\ СтрСодержит(&ПраваДоступаКДатамЗапрета,\ \",ИзменениеДатЗапретаЗагрузки,\")\ \#ТОГДА\n\nГДЕ\ ИСТИНА\n\n\ \ \#ИначеЕсли\ СтрСодержит(&ПраваДоступаКДатамЗапрета,\ \",ИзменениеДатЗапретаИзменения,\")\ \#ТОГДА\n\nГДЕ\n\t\ \ \ \ ТИПЗНАЧЕНИЯ(Пользователь)\ \=\ ТИП(Справочник\.Пользователи)\n\tИЛИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ \=\ ТИП(Справочник\.ГруппыПользователей)\n\tИЛИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ \=\ ТИП(Справочник\.ВнешниеПользователи)\n\tИЛИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ \=\ ТИП(Справочник\.ГруппыВнешнихПользователей)\n\tИЛИ\ Пользователь\ \=\ ЗНАЧЕНИЕ(Перечисление\.ВидыНазначенияДатЗапрета\.ДляВсехПользователей)\n\n\ \ \#ИначеЕсли\ СтрСодержит(&ПраваДоступаКДатамЗапрета,\ \",ИзменениеДатЗапретаЗагрузки,\")\ \#ТОГДА\n\nГДЕ\n\t\ \ ТИПЗНАЧЕНИЯ(Пользователь)\ <>\ ТИП(Справочник\.Пользователи)\n\tИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ <>\ ТИП(Справочник\.ГруппыПользователей)\n\tИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ <>\ ТИП(Справочник\.ВнешниеПользователи)\n\tИ\ ТИПЗНАЧЕНИЯ(Пользователь)\ <>\ ТИП(Справочник\.ГруппыВнешнихПользователей)\n\tИ\ Пользователь\ <>\ НЕОПРЕДЕЛЕНО\n\tИ\ Пользователь\ <>\ ЗНАЧЕНИЕ(Перечисление\.ВидыНазначенияДатЗапрета\.ПустаяСсылка)\n\tИ\ Пользователь\ <>\ ЗНАЧЕНИЕ(Перечисление\.ВидыНазначенияДатЗапрета\.ДляВсехПользователей)\n\n\ \ \#Иначе\n\nГДЕ\ ЛОЖЬ\n\n\ \ \#КонецЕсли\n\n\#КонецЕсли=\#IF &RecordLevelAccessRestrictionIsUniversal \#THEN\n\#ForRegister(\"MetadataObjectIDs\.InformationRegisterPeriodClosingDates\", \"User\", \"\", \"\", \"\", \"\")\n\#ELSE\n\n  \#IF StrContains(&AccessRightsToRestrictionDates, \",ChangeOfPeriodEndClosingDates,\")\n      AND StrContains(&AccessRightsToRestrictionDates, \",ChangeDataImportRestrictionDates,\") \#THEN\n\nWHERE TRUE\n\n  \#ElseIf StrContains(&AccessRightsToRestrictionDates, \",ChangeOfPeriodEndClosingDates,\") \#THEN\n\nWHERE\n\t    VALUETYPE(User) \= TYPE(Catalog\.Users)\n\tOR VALUETYPE(User) \= TYPE(Catalog\.UserGroups)\n\tOR VALUETYPE(User) \= TYPE(Catalog\.ExternalUsers)\n\tOR VALUETYPE(User) \= TYPE(Catalog\.ExternalUsersGroups)\n\tOR User \= VALUE(Enum\.PeriodClosingDatesPurposeTypes\.ForAllUsers)\n\n  \#ElseIf StrContains(&AccessRightsToRestrictionDates, \",ChangeDataImportRestrictionDates,\") \#THEN\n\nWHERE\n\t  VALUETYPE(User) <> TYPE(Catalog\.Users)\n\tAND VALUETYPE(User) <> TYPE(Catalog\.UserGroups)\n\tAND VALUETYPE(User) <> TYPE(Catalog\.ExternalUsers)\n\tAND VALUETYPE(User) <> TYPE(Catalog\.ExternalUsersGroups)\n\tAND User <> Undefined\n\tAND User <> VALUE(Enum\.PeriodClosingDatesPurposeTypes\.EmptyRef)\n\tAND User <> VALUE(Enum\.PeriodClosingDatesPurposeTypes\.ForAllUsers)\n\n  \#Else\n\nWHERE FALSE\n\n  \#ENDIF\n\n\#ENDIF